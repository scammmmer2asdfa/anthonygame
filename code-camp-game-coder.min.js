Math.radians=function(e){return e*Math.PI/180},Math.degrees=function(e){return 180*e/Math.PI};var getCircularReplacer=function(){var o=new WeakSet;return function(e,t){if("object"==typeof t&&null!==t){if(o.has(t))return;o.add(t)}return t}},checkNAN=function(e,t){if(isNaN(e))throw(t||"Value")+" must be a number, instead was "+(e&&"NaN"!==e.toString()?"'"+e+"'":"not a number")},QueryString=(()=>{for(var e={},t=window.location.search.substring(1).split("&"),o=0;o<t.length;o++){var n,i=t[o].split("=");void 0===e[i[0]]?e[i[0]]=decodeURIComponent(i[1]):"string"==typeof e[i[0]]?(n=[e[i[0]],decodeURIComponent(i[1])],e[i[0]]=n):e[i[0]].push(decodeURIComponent(i[1]))}return e})(),leap=(f=>{f.log=function(e,t,o,n,i,r,s){var a,l,c;if(null!=t&&null!=o){for(u in t.actorTypes){var d=t.actorTypes[u];if(d.id==o){l=d,c="actor";break}}if(!l)for(var u in t.scenes){var h=t.scenes[u];h.id==o&&(l=h.def,c="scene")}if(null!=l)if(a=c+": "+l.name,null!=s)for(var u in l.codeModules){var m=l.codeModules[u];m.id===s&&(a+=" - module: "+m.name)}else if(null!=n)for(var u in l.codeFunctions){var p,g=l.codeFunctions[u];if(g.id==n){a+=" - function: "+g.name,null!=i&&null!=(g=(p=function(e,t){for(var o in e){var n,o=e[o];if(null!=o){if(o.id==t)return o;if(null!=(n=null==(n=null!=o.blocks?p(o.blocks,t):n)?p([o.expression,o.leftCondition,o.rightCondition],t):n))return n}}})(g.blocks,i))&&(a+=" - blockType: "+g.type,null!=r)&&(a+=" - attribute: "+r);break}}}return f._doLog(e,a),a},f._doLog=function(e,t){console.log((t?t+": ":"")+e)},f.error=function(e,t,o,n){e instanceof LeapCodeError?f._doError(e,t):(console.warn("please report this error",e),f._doError({message:"game engine error, please report this problem: "+e,ownerId:o?o.id:null,functionId:n?n.id:null},t))},f._doError=function(e,t){f.log("ERROR: "+e.message,t,e.ownerId,e.functionId,e.blockId,e.blockAttributeName,e.moduleId)},f.getJSON=function(e,t){var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="json",o.onload=function(){var e=o.status;200==e?t(null,o.response):t(e)},o.send()},f.tostr=function(e){var o=[];return JSON.stringify(e,function(e,t){if("object"==typeof t&&null!==t){if(-1!==o.indexOf(t))return;o.push(t)}return t})};var n={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63};return f.decodeBase64Int=function(e){for(var t=0,o=0;o<e.length;o++)t=(t<<6)+n[e[o]];return t},f})(leap||{}),codeblocks=(l=>(l.blockHandlers={},l.blockHandlers.makeCameraFollow=function(e,t,o){l.getValueFromBlock(e,t,o,"targetObject").makeCameraFollow()},l.blockHandlers.keepInWorld=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"targetObject"),e=l.getBoolFromBlock(e,t,o,"value");n.keepInWorld(e)},l.blockHandlers.setCanRotate=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"targetObject"),e=l.getBoolFromBlock(e,t,o,"value");n.setCanRotate(e)},l.blockHandlers.setAffectedByGravity=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"targetObject"),e=l.getBoolFromBlock(e,t,o,"value");n.setAffectedByGravity(e)},l.blockHandlers.setSensor=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"targetObject"),e=l.getBoolFromBlock(e,t,o,"value");n.setSensor(e)},l.blockHandlers.setXPosition=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"targetObject"),e=l.getValueFromBlockAsNum(e,t,o,"position");n.setXPosition(e)},l.blockHandlers.setYPosition=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"targetObject"),e=l.getValueFromBlockAsNum(e,t,o,"position");n.setYPosition(e)},l.blockHandlers.setScale=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"targetObject"),i=l.getValueFromBlockAsNum(e,t,o,"x"),e=l.getValueFromBlockAsNum(e,t,o,"y");n.setScale(i,e)},l.blockHandlers.setXSpeed=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"targetObject"),e=l.getValueFromBlockAsNum(e,t,o,"speed");n.setXSpeed(e)},l.blockHandlers.setYSpeed=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"targetObject"),e=l.getValueFromBlockAsNum(e,t,o,"speed");n.setYSpeed(e)},l.blockHandlers.setSpeed=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"targetObject"),e=l.getValueFromBlockAsNum(e,t,o,"speed");n.setSpeed(e)},l.blockHandlers.setSpinSpeed=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"targetObject"),e=l.getValueFromBlockAsNum(e,t,o,"speed");n.setSpinSpeed(e)},l.blockHandlers.setDirection=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"targetObject"),e=l.getValueFromBlockAsNum(e,t,o,"direction");n.setDirection(e)},l.blockHandlers.setThrust=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"targetObject"),e=l.getValueFromBlockAsNum(e,t,o,"speed");n.setThrust(e)},l.blockHandlers.setDrag=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"targetObject"),e=l.getValueFromBlockAsNum(e,t,o,"amount");n.setDrag(e)},l.blockHandlers.faceTowards=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"targetObject"),i=o.opType;switch(i){case"mouse":n.faceTowardsMouse();break;case"actor":var r=l.getValueFromBlock(e,t,o,"actor");n.faceTowardsActor(r);break;case"point":var r=l.getValueFromBlock(e,t,o,"x"),s=l.getValueFromBlock(e,t,o,"y");n.faceTowardsPoint(r,s);break;default:throw new LeapCodeError(e.id,t,o.id,"opType","Unexpected type for 'faceTowards': "+i)}},l.blockHandlers.faceAway=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"targetObject"),i=o.opType;switch(i){case"mouse":n.faceAwayFromMouse();break;case"actor":var r=l.getValueFromBlock(e,t,o,"actor");n.faceAwayFromActor(r);break;case"point":var r=l.getValueFromBlock(e,t,o,"x"),s=l.getValueFromBlock(e,t,o,"y");n.getValueFromBlock(r,s);break;default:throw new LeapCodeError(e.id,t,o.id,"opType","Unexpected type for 'faceAway': "+i)}},l.blockHandlers.moveTowardsPoint=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"target"),i=l.getValueFromBlock(e,t,o,"x"),r=l.getValueFromBlock(e,t,o,"y"),e=l.getValueFromBlock(e,t,o,"speed");n.moveTowardsPoint(i,r,e)},l.blockHandlers.moveTowards=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"targetObject"),i=l.getValueFromBlock(e,t,o,"speed"),r=o.opType;switch(r){case"mouse":n.moveTowardsMouse(i);break;case"actor":var s=l.getValueFromBlock(e,t,o,"actor");n.moveTowardsActor(s,i);break;case"point":var s=l.getValueFromBlock(e,t,o,"x"),a=l.getValueFromBlock(e,t,o,"y");n.moveTowardsPoint(s,a,i);break;default:throw new LeapCodeError(e.id,t,o.id,"opType","Unexpected type for 'moveTowards': "+r)}},l.blockHandlers.moveAway=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"targetObject"),i=l.getValueFromBlock(e,t,o,"speed"),r=o.opType;switch(r){case"mouse":n.moveAwayFromMouse(i);break;case"actor":var s=l.getValueFromBlock(e,t,o,"actor");n.moveAwayFromActor(s,i);break;case"point":var s=l.getValueFromBlock(e,t,o,"x"),a=l.getValueFromBlock(e,t,o,"y");n.moveAwayFromPoint(s,a,i);break;default:throw new LeapCodeError(e.id,t,o.id,"opType","Unexpected type for 'moveAway': "+r)}},l.blockHandlers.playAnimation=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"targetObject"),i=l.getValueFromBlock(e,t,o,"animationName"),e=(i||"string"!=typeof o.animation||(i=o.animation),l.getBoolFromBlock(e,t,o,"loop"));n.playAnimation(i,e)},l.blockHandlers.stopAnimation=function(e,t,o){l.getValueFromBlock(e,t,o,"targetObject").stopAnimation()},l.blockHandlers.showSpeechBubble=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"text");l.getValueFromBlock(e,t,o,"targetObject").showSpeechBubble(n)},l.blockHandlers.hideSpeechBubble=function(e,t,o){l.getValueFromBlock(e,t,o,"targetObject").hideSpeechBubble()},l.blockHandlers.setSpeechBubbleText=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"text");l.getValueFromBlock(e,t,o,"targetObject").setSpeechBubbleText(n)},l.blockHandlers.createActor=function(e,t,o){o.actorTypeId||o.actorType&&o.actorType.id;var n=!o.x||null===o.x.expression&&""===o.x.value?null:l.getValueFromBlockAsNum(e,t,o,"x"),t=!o.y||null===o.y.expression&&""===o.y.value?null:l.getValueFromBlockAsNum(e,t,o,"y");o.actorType?e.createActor(o.actorType.name,n,t):o.actorTypeId&&e.createActorById(o.actorTypeId,n,t)},l.blockHandlers.removeActor=function(e,t,o){l.getValueFromBlock(e,t,o,"targetObject").remove()},l.blockHandlers.goToSceneWithName=function(e,t,o){t=l.getValueFromBlock(e,t,o,"scene");e.game.goToSceneWithName(t)},l.blockHandlers.goToNextScene=function(e,t,o){e.game.goToNextScene()},l.blockHandlers.restartScene=function(e,t,o){e.game.restartScene()},l.blockHandlers.setSceneGravity=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"x"),t=l.getValueFromBlock(e,t,o,"y");("Actor"===e.classType?e.scene:e).setSceneGravity(n,t)},l.blockHandlers.setDebugRendering=function(e,t,o){t=l.getBoolFromBlock(e,t,o,"value");("Actor"===e.classType?e.scene:e).setDebugRendering(t)},l.blockHandlers.if=function(e,t,o){for(var n=0;n<o.length;n++){var i=o[n];if("else"==i.type||l.getValueFromBlock(e,t,i)){l.executeBlocks(e,t,i.blocks);break}}},l.blockHandlers.loop=function(e,t,o){var n=l.getValueFromBlockAsNum(e,t,o);if(n>e.game._maximumLoopCount)throw"Loop count of "+n+" exceeds our reasonable maximum "+e.game._maximumLoopCount;for(var i=0;i<n;i++)e._nextLoopItem=i,l.executeBlocks(e,t,o.blocks);e._nextLoopItem=null},l.blockHandlers.forEach=function(e,t,o){for(var n=l.getValueFromBlock(e,t,o,"list"),i=0;i<n.length;i++){var r=n[i];e._nextLoopItem=r,l.executeBlocks(e,t,o.blocks)}e.nextLoopItem=null},l.blockHandlers.timer=function(e,t,o){var n=l.getValueFromBlockAsNum(e,t,o),i=l.getBoolFromBlock(e,t,o,"repeat");e.startTimer(n,i,function(){l.executeBlocks(e,t,o.blocks)})},l.blockHandlers.log=function(e,t,o){var n=l.getValueFromBlock(e,t,o);leap.log(n,e.game,e.id,t,o.id)},l.blockHandlers.setGameVar=function(e,t,o){t=l.getValueFromBlock(e,t,o);e.game[o.variable.name]=t},l.blockHandlers.setOwnerVar=function(e,t,o){t=l.getValueFromBlock(e,t,o);e[o.variable.name]=t},l.blockHandlers.createLabel=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"name"),i=l.getValueFromBlockAsNum(e,t,o,"x"),t=l.getValueFromBlockAsNum(e,t,o,"y");("Actor"===e.classType?e.scene:e).createLabelWithName(n,i,t)},l.blockHandlers.showLabel=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"name"),i=l.getValueFromBlockAsNum(e,t,o,"x"),r=l.getValueFromBlockAsNum(e,t,o,"y"),t=l.getValueFromBlock(e,t,o,"text");("Actor"===e.classType?e.scene:e).showLabel(n,i,r,t)},l.blockHandlers.anchorLabel=function(e,t,o){var t=l.getValueFromBlock(e,t,o,"name"),n=e;"Actor"===e.classType&&(n=e.scene),"scene"===o.anchorTo?n.anchorLabelToScene(t):n.anchorLabelToCamera(t)},l.blockHandlers.removeLabel=function(e,t,o){t=l.getValueFromBlock(e,t,o,"name");("Actor"===e.classType?e.scene:e).removeLabel(t)},l.blockHandlers.setLabelText=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"name"),t=l.getValueFromBlock(e,t,o,"text");("Actor"===e.classType?e.scene:e).setLabelText(n,t)},l.blockHandlers.setLabelPos=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"name"),i=l.getValueFromBlockAsNum(e,t,o,"x"),t=l.getValueFromBlockAsNum(e,t,o,"y");("Actor"===e.classType?e.scene:e).setLabelPos(n,i,t)},l.blockHandlers.setLabelAlignment=function(e,t,o){var t=l.getValueFromBlock(e,t,o,"name"),n=o.alignmentY,o=o.alignmentX;("Actor"===e.classType?e.scene:e).setLabelAlignment(t,n,o)},l.blockHandlers.setLabelFont=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"name"),i=o.weight,t=l.getValueFromBlock(e,t,o,"size"),o=o.style;("Actor"===e.classType?e.scene:e).setLabelFont(n,i,t,o)},l.blockHandlers.setLabelFontColor=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"name"),i=o.color,r=o.strokeColor,t=l.getValueFromBlockAsNum(e,t,o,"strokeThickness");("Actor"===e.classType?e.scene:e).setLabelFontColor(n,i,r,t)},l.blockHandlers.setLabelBackgroundColor=function(e,t,o){t=l.getValueFromBlock(e,t,o,"name"),o=o.backgroundColor;("Actor"===e.classType?e.scene:e).setLabelBackgroundColor(t,o)},l.blockHandlers.setLabelWordWrap=function(e,t,o){var n=l.getValueFromBlock(e,t,o,"name"),i=l.getBoolFromBlock(e,t,o,"wordWrap"),t=l.getValueFromBlockAsNum(e,t,o,"wordWrapWidth");"Actor"===e.classType?e.scene.setLabelWordWrapping(n,i,t):e.setLabelWordWrap(n,i,t)},l.blockHandlers.enableVirtualController=function(e,t,o){var n=o.anchorX,o=o.anchorY;("Actor"===e.classType?e.scene:e).enableVirtualController(n,o)},l.blockHandlers.disableVirtualController=function(e,t,o){("Actor"===e.classType?e.scene:e).disableVirtualController()},l.blockHandlers.customFunction=function(e,t,o){e[o.params.funcName]()},l.blockHandlers.playSound=function(e,t,o){o=o.value.name;e.game.playSound(o)},l.blockHandlers.loopSound=function(e,t,o){o=o.value.name;e.game.loopSound(o)},l.blockHandlers.stopSounds=function(e,t,o){e.game.stopSounds()},l))((codeblocks=(u=>(u.lastCreatedActor=null,u.hasFunctionsOfType=function(e,t){if(e.def.codeFunctions)for(var o=0;o<e.def.codeFunctions.length;o++){var n=e.def.codeFunctions[o];if(n.type===t&&!n.disabled)return!0}return!1},u.findFunctionsOfType=function(e,t){var o=[];if(e.def.codeFunctions)for(var n=0;n<e.def.codeFunctions.length;n++){var i=e.def.codeFunctions[n];i.type!==t||i.disabled||o.push(i)}return o},u.executeFunctionsOfTypeWithErrorHandling=function(t,e){try{this.executeFunctionsOfType(t,e)}catch(e){leap.error(e,t.game)}},u.executeFunctionsOfType=function(e,t){if(e.def.codeFunctions)for(var o=0;o<e.def.codeFunctions.length;o++){var n=e.def.codeFunctions[o];n.type!==t||n.disabled||u.executeFunction(e,n)}},u.addCustomFunctions=function(e){for(var t=u.findFunctionsOfType(e,"customFunction"),o=0;o<t.length;o++){var n=t[o];leap.log("Adding custom function: "+JSON.stringify(n)),e[n.params.funcName]=u._createCustomFunction(e,n)}},u._createCustomFunction=function(e,t){return t.blocks?function(){u.executeBlocks(e,t.id,t.blocks)}:new Function(t.code)},u.addCustomVariables=function(e){if(e.def.customVariables)for(var t=0;t<e.def.customVariables.length;t++){var o=e.def.customVariables[t];e[o.name]=o.defaultValue||null}},u.executeFunctionWithErrorHandling=function(t,o){try{this.executeFunction(t,o)}catch(e){leap.error(e,t.game,t.def,o)}},u.executeFunction=function(e,t){t.blocks?u.executeBlocks(e,t.id,t.blocks,t.moduleId):new Function(t.code).call(e)},u.executeBlocks=function(t,o,e,n){if(e)for(var i=0;i<e.length;i++){var r=e[i],s=u.blockHandlers[r.type];if(!s){var a=null;switch(r.type){case"elseif":case"else":a="Blocks with type "+r.type+" need to be placed AFTER an accompanying IF block";break;default:a="No block handler found for type: "+r.type}throw new LeapCodeError(t.id,o,r.id,null,a,n)}try{if("if"==r.type){for(var l=!1,c=[r];i+1<e.length&&!l;){var d=e[i+1];"elseif"==d.type||"else"==d.type?(c.push(d),l="else"==d.type,i++):l=!0}s(t,o,c)}else s(t,o,r)}catch(e){throw e instanceof LeapCodeError?(e.moduleId=n,e):new LeapCodeError(t.id,o,r.id,null,e,n)}}},u.evaluateExpression=function(e,t,o){if(o){var n=u.expressionHandlers[o.type];if(n)return n(e,t,o);throw"No expression handler found for type: "+o.type}return null},u.toNum=function(e,t,o,n,i){return i?parseFloat(i):null},u.toBool=function(e,t,o,n,i){return 1==i||"true"===i},u.getBoolFromBlock=function(e,t,o,n){var i=null!=n?o[n]:o;return u.toBool(e,t,o.id,n,i)},u.getValueFromBlock=function(e,t,o,n){var i=null!=n?o[n]:o;return u.getValue(e,t,o.id,n,i)},u.getValueFromBlockAsNum=function(e,t,o,n){var i=u.getValueFromBlock(e,t,o,n);return u.toNum(e,t,o.id,n,i)},u.getValueFromBlockAsBool=function(e,t,o,n){var i=u.getValueFromBlock(e,t,o,n);return u.toBool(e,t,o.id,n,i)},u.getValue=function(e,t,o,n,i){if(i){if(i.expression)return u.evaluateExpression(e,t,i.expression);if(void 0!==i.value)return"this"===i.value?e:i.value;throw new LeapCodeError(e.id,t,o,n,"Missing value")}return null},u))(codeblocks||{}))||{}),LeapCodeError=function(e,t,o,n,i,r){var s=this;s.ownerId=e,s.functionId=t,s.blockId=o,s.blockAttributeName=n,s.message=i,s.moduleId=r},codeblocks=(i=>(i.expressionHandlers={},i.expressionHandlers.getName=function(e,t,o){return i.getValueFromBlock(e,t,o,"target").name},i.expressionHandlers.getSensor=function(e,t,o){return i.getValueFromBlock(e,t,o,"targetObject").isSensor},i.expressionHandlers.getXPosition=function(e,t,o){return i.getValueFromBlock(e,t,o,"targetObject").getXPosition()},i.expressionHandlers.getYPosition=function(e,t,o){return i.getValueFromBlock(e,t,o,"targetObject").getYPosition()},i.expressionHandlers.isLocated=function(e,t,o){t=i.getValueFromBlock(e,t,o,"targetObject"),o=o.direction;return e.isLocated(t,o)},i.expressionHandlers.getXScale=function(e,t,o){return i.getValueFromBlock(e,t,o,"targetObject").getXScale()},i.expressionHandlers.getYScale=function(e,t,o){return i.getValueFromBlock(e,t,o,"targetObject").getYScale()},i.expressionHandlers.getXSpeed=function(e,t,o){return i.getValueFromBlock(e,t,o,"targetObject").getXSpeed()},i.expressionHandlers.getYSpeed=function(e,t,o){return i.getValueFromBlock(e,t,o,"targetObject").getYSpeed()},i.expressionHandlers.isBlocked=function(e,t,o){return i.getValueFromBlock(e,t,o,"targetObject")["isBlocked"+o.direction]()},i.expressionHandlers.getDirection=function(e,t,o){return i.getValueFromBlock(e,t,o,"targetObject").getDirection()},i.expressionHandlers.didCollideOnSide=function(e,t,o){e=i.getValueFromBlock(e,t,o,"targetObject"),t=o.direction;return e.collisionDirection==t},i.expressionHandlers.getAnimation=function(e,t,o){return i.getValueFromBlock(e,t,o,"targetObject").getAnimation()},i.expressionHandlers.sceneWidth=function(e,t,o){e="Scene"==e.classType?e:e.scene;return"Tiles"===o.units?e.def.cellsAcross:e.getWidth()},i.expressionHandlers.sceneHeight=function(e,t,o){e="Scene"==e.classType?e:e.scene;o.units;return"Tiles"===o.units?e.def.cellsDown:e.getHeight()},i.expressionHandlers.findActorsWithName=function(e,t,o){var n,e="Scene"==e.classType?e:e.scene;return o.actorType?(n=o.actorType.name,e.findActors(n)):o.actorTypeId?e.findActorsById(o.actorTypeId):[]},i.expressionHandlers.isDebugRendering=function(e,t,o){return("Actor"===e.classType?e.scene:e).isDebugRendering()},i.expressionHandlers.trueBlock=function(e,t,o){return!0},i.expressionHandlers.falseBlock=function(e,t,o){return!1},i.expressionHandlers.not=function(e,t,o){return!i.getValueFromBlock(e,t,o,"leftCondition")},i.expressionHandlers.and=function(e,t,o){var n=i.getValueFromBlockAsBool(e,t,o,"leftCondition"),e=i.getValueFromBlockAsBool(e,t,o,"rightCondition");return n&&e},i.expressionHandlers.or=function(e,t,o){var n=i.getValueFromBlockAsBool(e,t,o,"leftCondition"),e=i.getValueFromBlockAsBool(e,t,o,"rightCondition");return n||e},i.expressionHandlers.eq=function(e,t,o){return i.getValueFromBlock(e,t,o,"leftCondition")==i.getValueFromBlock(e,t,o,"rightCondition")},i.expressionHandlers.neq=function(e,t,o){return i.getValueFromBlock(e,t,o,"leftCondition")!=i.getValueFromBlock(e,t,o,"rightCondition")},i.expressionHandlers.gt=function(e,t,o){var n=i.getValueFromBlockAsNum(e,t,o,"leftCondition"),e=i.getValueFromBlockAsNum(e,t,o,"rightCondition");return checkNAN(n,"Left value of Greater Than"),checkNAN(n,"Right value of Greater Than"),e<n},i.expressionHandlers.ge=function(e,t,o){var n=i.getValueFromBlockAsNum(e,t,o,"leftCondition"),e=i.getValueFromBlockAsNum(e,t,o,"rightCondition");return checkNAN(n,"Left value of Greater Than Or Equal To"),checkNAN(e,"Right value of Greater Than Or Equal To"),e<=n},i.expressionHandlers.lt=function(e,t,o){var n=i.getValueFromBlockAsNum(e,t,o,"leftCondition"),e=i.getValueFromBlockAsNum(e,t,o,"rightCondition");return checkNAN(n,"Left value of Less Than"),checkNAN(e,"Right value of Less Than"),n<e},i.expressionHandlers.le=function(e,t,o){var n=i.getValueFromBlockAsNum(e,t,o,"leftCondition"),e=i.getValueFromBlockAsNum(e,t,o,"rightCondition");return checkNAN(n,"Left value of Less Than Or Equal To"),checkNAN(e,"Right value of Less Than Or Equal To"),n<=e},i.expressionHandlers.countItems=function(e,t,o){return i.getValueFromBlock(e,t,o,"leftCondition").length},i.expressionHandlers.randomChoice=function(e,t,o){t=i.getValueFromBlock(e,t,o,"leftCondition");return e.game.randomChoice(t)},i.expressionHandlers.asList=function(e,t,o){return i.getValueFromBlock(e,t,o).split(",")},i.expressionHandlers.fromListGetItem=function(e,t,o){return i.getValueFromBlock(e,t,o,"leftCondition")[i.getValueFromBlockAsNum(e,t,o,"rightCondition")]},i.expressionHandlers.plus=function(e,t,o){var n=i.getValueFromBlockAsNum(e,t,o,"leftCondition"),e=i.getValueFromBlockAsNum(e,t,o,"rightCondition");return checkNAN(n,"Left value of Plus"),checkNAN(e,"Right value of Plus"),n+e},i.expressionHandlers.minus=function(e,t,o){var n=i.getValueFromBlockAsNum(e,t,o,"leftCondition"),e=i.getValueFromBlockAsNum(e,t,o,"rightCondition");return checkNAN(n,"Left value of Minus"),checkNAN(e,"Right value of Minus"),n-e},i.expressionHandlers.multiply=function(e,t,o){var n=i.getValueFromBlockAsNum(e,t,o,"leftCondition"),e=i.getValueFromBlockAsNum(e,t,o,"rightCondition");return checkNAN(n,"Left value of Multiply"),checkNAN(e,"Right value of Multiply"),n*e},i.expressionHandlers.divide=function(e,t,o){var n=i.getValueFromBlockAsNum(e,t,o,"leftCondition"),e=i.getValueFromBlockAsNum(e,t,o,"rightCondition");return checkNAN(n,"Left value of Divide"),checkNAN(e,"Right value of Divide"),n/e},i.expressionHandlers.modulo=function(e,t,o){var n=i.getValueFromBlockAsNum(e,t,o,"leftCondition"),e=i.getValueFromBlockAsNum(e,t,o,"rightCondition");return checkNAN(n,"Left value of Modulo"),checkNAN(e,"Right value of Modulo"),n%e},i.expressionHandlers.random=function(e,t,o){var n=i.getValueFromBlockAsNum(e,t,o,"leftCondition"),t=i.getValueFromBlockAsNum(e,t,o,"rightCondition");return e.game.randomNumber(t,n)},i.expressionHandlers.min=function(e,t,o){var n=i.getValueFromBlockAsNum(e,t,o,"leftCondition"),e=i.getValueFromBlockAsNum(e,t,o,"rightCondition");return checkNAN(n,"Left value of Minimum"),checkNAN(e,"Right value of Minimum"),Math.min(n,e)},i.expressionHandlers.max=function(e,t,o){var n=i.getValueFromBlockAsNum(e,t,o,"leftCondition"),e=i.getValueFromBlockAsNum(e,t,o,"rightCondition");return checkNAN(n,"Left value of Maximum"),checkNAN(e,"Right value of Maximum"),Math.max(n,e)},i.expressionHandlers.abs=function(e,t,o){e=i.getValueFromBlockAsNum(e,t,o,"leftCondition");return checkNAN(e,"Value of Absolute Value"),Math.abs(e)},i.expressionHandlers.keyIsDown=function(e,t,o){return e.game.isKeyPressed(o.key)},i.expressionHandlers.isMouseDown=function(e,t,o){return e.game.isMouseDown()},i.expressionHandlers.isMouseLeftOfActor=function(e,t,o){t=i.getValueFromBlock(e,t,o,"targetObject");return e.game.isMouseLeftOfActor(t)},i.expressionHandlers.isMouseRightOfActor=function(e,t,o){t=i.getValueFromBlock(e,t,o,"targetObject");return e.game.isMouseRightOfActor(t)},i.expressionHandlers.isMouseAboveActor=function(e,t,o){t=i.getValueFromBlock(e,t,o,"targetObject");return e.game.isMouseAboveActor(t)},i.expressionHandlers.isMouseBelowActor=function(e,t,o){t=i.getValueFromBlock(e,t,o,"targetObject");return e.game.isMouseBelowActor(t)},i.expressionHandlers.getMouseX=function(e,t,o){return e.game.getMouseX()},i.expressionHandlers.getMouseY=function(e,t,o){return e.game.getMouseY()},i.expressionHandlers.isVirtualControllerEnabled=function(e,t,o){return e.classType,e.scene.isVirtualControllerEnabled()},i.expressionHandlers.isTouchAvailable=function(e,t,o){return e.game.isTouchAvailable()},i.expressionHandlers.screenWidth=function(e,t,o){return e.game.screenWidth()},i.expressionHandlers.screenHeight=function(e,t,o){return e.game.screenHeight()},i.expressionHandlers.getThis=function(e,t,o){return e},i.expressionHandlers.collidedWith=function(e,t,o){return e.collidedWith},i.expressionHandlers.nextLoopItem=function(e,t,o){return e._nextLoopItem},i.expressionHandlers.getGameVar=function(e,t,o){return e.game[o.variable.name]},i.expressionHandlers.getOwnerVar=function(e,t,o){return e[o.variable.name]},i.expressionHandlers.getLastCreated=function(e,t,o){return("Actor"===e.classType?e.scene:e).lastCreatedActor},i.expressionHandlers.andText=function(e,t,o){return i.getValueFromBlock(e,t,o,"leftCondition")+i.getValueFromBlock(e,t,o,"rightCondition")},i.expressionHandlers.getLabelXPos=function(e,t,o){t=i.getValueFromBlock(e,t,o,"name");return("Actor"===e.classType?e.scene:e).getLabelXPos(t)},i.expressionHandlers.getLabelYPos=function(e,t,o){t=i.getValueFromBlock(e,t,o,"name");return("Actor"===e.classType?e.scene:e).getLabelYPos(t)},i))(codeblocks||{}),LeapBootState=function(e,t){var o=this;o._game=e,this.create=function(){o._game._phaserGame.time.advancedTiming=!0,o._game._phaserGame.stage.backgroundColor="#000000",o._game._phaserGame.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,o._game._phaserGame.state.start("load"),o._game._sizeToFit()}},LeapLoadState=function(e,r,s){var a,d=this;d._game=e,this.progressCallback=function(e,t){var o,n,i;r||(a?a.clear():a=d._game._phaserGame.add.graphics(0,0),n=d._game._phaserGame.scale.width,i=d._game._phaserGame.scale.height,o=n/2,n=Math.floor((n-o)/2),i=Math.floor((i-30)/2),a.lineStyle(2,16777215,1),a.drawRect(n,i,o,30),a.beginFill(16777215),a.drawRect(n,i,Math.floor(o*e),30),a.endFill()),r&&r(e,t),t&&s&&s()},this.preload=function(){var e;if(d._game._phaserGame.load.baseURL=d._game.def.assetBucketUrl,d._game._phaserGame.load.crossOrigin="anonymous",this.progressCallback(0),d._game._phaserGame.load.onFileComplete.add(function(e,t,o,n,i){e=Math.min(1,n/Math.max(1,i-1));this.progressCallback(e)},this),d._game.def.keys)for(e=0;e<d._game.def.keys.length;e++){var t=d._game.def.keys[e];d._game.keys[t]=d._game._phaserGame.input.keyboard.addKey(Phaser.Keyboard[t.toUpperCase()]),leap.log("Registered key '"+t+"' (key code = "+d._game.keys[t].keyCode+")")}if(d._game.def.backgrounds)for(e=0;e<d._game.def.backgrounds.length;e++){var o=d._game.def.backgrounds[e];leap.log("Loading background asset on scene: "+o.name),d._game.backgrounds[o.id]=o,d._game._phaserGame.load.image(o.id,"background/"+o.backgroundAssetUrl+"?t="+d._game.cacheVersion)}if(d._game.def.tileSets)for(e=0;e<d._game.def.tileSets.length;e++){var n=d._game.def.tileSets[e];leap.log("Loading tile set asset: "+n.name),d._game.tileSets[n.id]=n,d._game._phaserGame.load.image(n.id,"tileset/"+n.tileSetAssetUrl+"?t="+d._game.cacheVersion)}if(d._game.def.spriteSheets)for(e=0;e<d._game.def.spriteSheets.length;e++){var i=d._game.def.spriteSheets[e];leap.log("Loading sprite sheet asset: "+i.name),d._game.spriteSheets[i.id]=i,d._game._phaserGame.load.spritesheet(i.id,"spritesheet/"+i.spriteSheetAssetUrl+"?t="+d._game.cacheVersion,i.cellWidth,i.cellHeight)}if(leap.log("Loading virtual controller graphic"),d._game._virtualControllerGraphicPrefix="virtualController",d._game._phaserGame.load.spritesheet(d._game._virtualControllerGraphicPrefix+"Base-BL","static/vc-base-bl.png?t="+d._game.cacheVersion,100,100),d._game._phaserGame.load.spritesheet(d._game._virtualControllerGraphicPrefix+"Base-BR","static/vc-base-br.png?t="+d._game.cacheVersion,100,100),d._game._phaserGame.load.spritesheet(d._game._virtualControllerGraphicPrefix+"Base-TL","static/vc-base-tl.png?t="+d._game.cacheVersion,100,100),d._game._phaserGame.load.spritesheet(d._game._virtualControllerGraphicPrefix+"Base-TR","static/vc-base-tr.png?t="+d._game.cacheVersion,100,100),d._game._phaserGame.load.spritesheet(d._game._virtualControllerGraphicPrefix+"Down","static/vc-down.png?t="+d._game.cacheVersion,28,42),d._game._phaserGame.load.spritesheet(d._game._virtualControllerGraphicPrefix+"Right","static/vc-right.png?t="+d._game.cacheVersion,39,31),d._game._phaserGame.load.spritesheet(d._game._virtualControllerGraphicPrefix+"Left","static/vc-left2.png?t="+d._game.cacheVersion,39,31),d._game._phaserGame.load.spritesheet(d._game._virtualControllerGraphicPrefix+"Up","static/vc-up.png?t="+d._game.cacheVersion,28,42),d._game._phaserGame.load.spritesheet(d._game._virtualControllerGraphicPrefix+"Action","static/vc-action.png?t="+d._game.cacheVersion,36,36),d._game.def.sounds)for(d._game.sounds=d._game.sounds||{},e=0;e<d._game.def.sounds.length;e++){var r=d._game.def.sounds[e];leap.log("Loading sound asset: "+r.name),d._game.sounds[r.name]=r,d._game._phaserGame.load.audio(r.name,["sound/"+r.soundAssetUrl+"?t="+d._game.cacheVersion,"sound/silence.mp3?t="+d._game.cacheVersion])}if(d._game.def.images)for(e=0;e<d._game.def.images.length;e++){var s=d._game.def.images[e];leap.log("Loading image asset: "+s.name),d._game.images[s.id]=s,d._game._phaserGame.load.image(s.id,"image/"+s.imageAssetUrl+"?t="+d._game.cacheVersion)}if(d._game.def.actorTypes)for(e=0;e<d._game.def.actorTypes.length;e++){var a=d._game.def.actorTypes[e];d._game.codeModuleReader.handleModulesForOwnerDef(a,"Actor"),d._game.actorTypes.push(a),d._game.actorTypesById[a.id]=a}for(e=0;e<d._game.def.scenes.length;e++){var l=d._game.def.scenes[e],c=(d._game.codeModuleReader.handleModulesForOwnerDef(l,"Scene"),new Scene(d._game,l));d._game.scenes.push(c),d._game.scenesByName[c.name]=c,d._game._phaserGame.state.add(l.id,c._phaserState)}},this.create=function(){d._game.sounds={};var t=[];d._game.def.sounds?(d._game.def.sounds.forEach(function(e){d._game.sounds[e.name]=d._game._phaserGame.add.audio(e.name),t.push(d._game.sounds[e.name])}),d._game._phaserGame.sound.setDecodedCallback(t,this.start,this)):this.start()},this.start=function(){d._game._phaserGame.physics.startSystem(Phaser.Physics.BOX2D);var e=d._game.startingSceneId;e=(e=e||d._game.def.initialSceneId)||d._game.def.scenes[0].id,this.progressCallback(1,!0),d._game._phaserGame.input.touch.addTouchLockCallback(function(){return d._game._phaserGame.sound.context&&"suspended"===d._game._phaserGame.sound.context.state&&d._game._phaserGame.sound.context.resume(),!0},this),d._game._phaserGame.input.keyboard.addCallbacks(this,function(){return d._game._phaserGame.sound.context&&"suspended"===d._game._phaserGame.sound.context.state&&d._game._phaserGame.sound.context.resume(),!0}),d._game.goToSceneWithId(e)}},Scene=function(e,t){leap.log("Creating scene: "+t.name),this.classType="Scene";var F=this;F.game=e,F.def=t,F.id=t.id,F.name=t.name,F.actors=[],F.layers=[],F.labels=[],F._isDebugRendering=!1,codeblocks.addCustomFunctions(F),codeblocks.addCustomVariables(F),F._phaserState={preload:function(){this.id=F.id,F.game._phaserGame.stage.backgroundColor=F.def.bgcolor},create:function(){F.firstUpdate=!0,F.active=!0;var e=0,t=(F.def.gravityX&&(leap.log("Setting X Gravity to: "+F.def.gravityX),e=F.def.gravityX/F.game._phaserGame.physics.box2d.ptmRatio*-1),0);if(F.def.gravityY&&(leap.log("Setting Y Gravity to: "+F.def.gravityY),t=F.def.gravityY/F.game._phaserGame.physics.box2d.ptmRatio*-1),F.game._phaserGame.physics.box2d.world.SetGravity({x:e,y:t}),this.generateTileMapLayers=function(e,t,o,n){var i=F.game._phaserGame.add.tilemap(),r=i.create("layer-"+n,F.def.cellsAcross,F.def.cellsDown,F.def.cellWidth,F.def.cellHeight),s=!1,a={},l=0;if(F.game.def.tileSets)for(f=0;f<F.game.def.tileSets.length;f++){var c=F.game.def.tileSets[f];if(i.addTilesetImage(c.id,c.id,c.cellWidth,c.cellHeight,0,0,l),c.blocks)for(var d=0;d<c.blocks.length;d++)i.setCollision(c.blocks[d]+l,!0,r);if(c.shapes)for(var d in c.shapes){var u=c.shapes[d];a[parseInt(d)+l]=u}l+=c.columns*c.rows}for(var h=0;h<t;h++)for(var m=0;m<o;m++){var p,g=e(h,m,n);g&&(p=g.tileIndex,i.putTile(p,m,h,r),s=s||g.hasNextTile)}(function(e,t,o,n,i){t=e.getLayer(t),void 0===o&&(o=!0),void 0===n&&(n=!0),this.clearTilemapLayerBodies(e,t);for(var r=0,s=0,a=0,l=0,c=e.layers[t].height;l<c;l++)for(var r=0,d=0,u=e.layers[t].width;d<u;d++){var h,m,p,g,f=e.layers[t].data[l][d];f&&-1<f.index&&f.collides&&(h=i[f.index],n&&!h?((m=e.getTileRight(t,d,l))&&(p=i[m.index]),0===r&&(s=f.x*f.width,a=f.y*f.height,r=f.width),m&&m.collides&&!p?r+=f.width:((g=new Phaser.Physics.Box2D.Body(this.game,null,s,a,0)).addRectangle(r,f.height,r/2,f.height/2,0),o&&this.addBody(g),e.layers[t].bodies.push(g),r=0)):(g=this.createBody(f.x*f.width,f.y*f.height,0,!1),h?g.addPolygon(h):g.addRectangle(f.width,f.height,f.width/2,f.height/2,0),o&&this.addBody(g),e.layers[t].bodies.push(g),r=0))}return e.layers[t].bodies}).call(F.game._phaserGame.physics.box2d,i,r,!0,!0,a);F.layers.push(r),s&&this.generateTileMapLayers(e,t,o,++n)},F._backgroundGroup=F.game._phaserGame.add.group(),F.def.background&&F.def.background.backgroundId&&(e=F.game.backgrounds[F.def.background.backgroundId],t=F.game._phaserGame.add.tileSprite(0,0,e.width,e.height,e.id,0,F._backgroundGroup),null!=(e=F.def.background.alpha)&&(t.alpha=e),t.fixedToCamera=!0,F._background=t),F.game.def.tileSets&&0<F.game.def.tileSets.length)if(F.def.layers){var f,o=0;for(f in F.game.def.tileSets){var n=F.game.def.tileSets[f];o+=n.rows*n.columns}for(var r=0,i=o;0<i;)i=Math.floor(i/64),r++;var s=F.def.layers,a=function(e,t,o){var n=s[o],i=null;return i=n&&(n=n[e])&&(e=t*r,t=n.substr(e,r))&&" "!=t.charAt(0)?{tileIndex:leap.decodeBase64Int(t),hasNextTile:o<s.length-1}:i}}else if(F.def.tiles){var l={},d={},u=0;for(f=0;f<F.game.def.tileSets.length;f++){var h=F.game.def.tileSets[f];l[h.id]=u,u+=h.columns*h.rows,d[h.id]=h}var m=F.def.tiles;a=function(e,t,o){var n=null,e=m[e];if(e){for(var i=e[t];0<o&&i;)i=i.nextTile,o--;i&&(e=d[i.tileSetId],n={tileIndex:l[i.tileSetId]+(e.columns*i.row+i.column),hasNextTile:null!=i.nextTile})}return n}}if(this.generateTileMapLayers(a=null==a?function(){return null}:a,F.def.cellsDown,F.def.cellsAcross,0),F.layers[0].resizeWorld(),F.width=F.def.cellsAcross*F.def.cellWidth,F.height=F.def.cellsDown*F.def.cellHeight,F._actorGroup=F.game._phaserGame.add.group(),F._actorGroup.enableBody=!0,F._actorGroup.physicsBodyType=Phaser.Physics.BOX2D,F._interfaceGroup=F.game._phaserGame.add.group(),F._interfaceGroup.enableBody=!1,F._virtualController=new VirtualController(F.game),F.def.actors)for(f=0;f<F.def.actors.length;f++){var p=F.def.actors[f],g=F.game.actorTypesById[p.type],g=(leap.log("Adding actor to scene of type: "+g.name),new Actor(F.game,g));g._init(F,p.x,p.y,p.scaleX,p.scaleY),F.actors.push(g)}var b=codeblocks.findFunctionsOfType(F,"onKeyDown");for(f=0;f<b.length;f++){var y=b[f];F.game.keys[y.params.key].onDown.add(function(){codeblocks.executeFunction(F,this)}.bind(y),F)}codeblocks.hasFunctionsOfType(F,"onMouseDown")&&F.game._phaserGame.input.onDown.add(function(e){F._virtualController._containsPoint(e.worldX,e.worldY)||codeblocks.executeFunctionsOfTypeWithErrorHandling(F,"onMouseDown")},F);var v=codeblocks.findFunctionsOfType(F,"onTimerOnce");if(v&&v.length)for(c=0;c<v.length;c++){var k=v[c];F.startTimer(k.params.time,!1,function(){codeblocks.executeFunction(F,this)}.bind(k))}var x=codeblocks.findFunctionsOfType(F,"onTimerRepeat");if(x&&x.length)for(c=0;c<x.length;c++){var C=x[c];F.startTimer(C.params.time,!0,function(){codeblocks.executeFunction(F,this)}.bind(C))}codeblocks.executeFunctionsOfTypeWithErrorHandling(F,"onCreate")},update:function(){F.firstUpdate&&F.game._sizeToFit(),codeblocks.executeFunctionsOfTypeWithErrorHandling(F,"onUpdate");for(var e,t,o=[],n=0;n<F.actors.length;n++){var i=F.actors[n];i.alive?i._disableUpdates||i.update():o.push(n)}for(n=o.length;n--;)F.actors[o[n]].alive||F.actors.splice(o[n],1);null!=F._background&&(e=F.game._phaserGame.camera.x,t=F.game._phaserGame.camera.y,F._background.tilePosition.x=F._backgroundOffsetX+e*F._backgroundCameraScaleX,F._background.tilePosition.y=F._backgroundOffsetY+t*F._backgroundCameraScaleY),F.firstUpdate=!1},render:function(){F._isDebugRendering&&F.game._phaserGame.debug.box2dWorld()},shutdown:function(){F.active=!1;for(var e,t=0;t<F.actors.length;t++)F.actors[t].sprite.destroy();for(e in F.actors.length=0,F._actorGroup.removeAll(),F._virtualController.disable(),F.labels)F.labels[e].destroy();for(F.labels=[],t=0;t<F.layers.length;t++)F.layers[t].destroy();F.layers.length=0}},this.createActorById=function(e,t,o){try{this.createActor(F.game._getActorTypeById(e).name,t,o)}catch(e){throw"Cannot create actor: "+e}},this.createActor=function(e,t,o){checkNAN(t,"X Position"),checkNAN(o,"Y Position");for(var n=0;n<F.game.actorTypes.length;n++)if(F.game.actorTypes[n].name===e){var i=F.game.actorTypes[n];break}if(!i)throw"Actor of type named "+e+" does not exist";leap.log("Adding actor to scene of type: "+i.name);var r=new Actor(F.game,i);return r._init(F,t,o),F.actors.push(r),r},this.createLabel=function(e,t,o){return checkNAN(e,"X Position"),checkNAN(t,"Y Position"),F.game._createLabel(e,t,o,{font:"normal 24px Arial",fill:"black",stroke:"gray",strokeThickness:1,shadowStroke:!0})},this.createLabelWithName=function(e,t,o,n){if(this._checkLabelName(e),checkNAN(t,"X Position"),checkNAN(o,"Y Position"),F.labels[e])throw"A label already exists with name '"+e+"'";F.labels[e]=F.game._createLabel(t,o,"",{font:"normal 24px Arial",fill:"black",stroke:"gray",strokeThickness:1,shadowStroke:!0})},this.showLabel=function(e,t,o,n){this._checkLabelName(e),checkNAN(t,"X Position"),checkNAN(o,"Y Position"),F.labels[e]?this.setLabelPos(e,t,o):F.labels[e]=F.game._createLabel(t,o,"",{font:"normal 24px Arial",fill:"black",stroke:"gray",strokeThickness:1,shadowStroke:!0}),this.setLabelText(e,n)},this.anchorLabelToScene=function(e){this._checkLabelName(e),F.labels[e].fixedToCamera=!1},this.anchorLabelToCamera=function(e){this._checkLabelName(e),F.labels[e].fixedToCamera=!0},this.removeLabel=function(e){this._checkLabelName(e),F.labels[e].destroy(),F.labels.splice(e,1)},this.setLabelText=function(e,t){this._checkLabelName(e),F.labels[e].text=t||""},this.setLabelFont=function(e,t,o,n){this._checkLabelName(e),checkNAN(o,"Font Size");var i=F.labels[e].style;i.font=t+" "+o+"px "+n,F.labels[e].setStyle(i)},this.setLabelFontColor=function(e,t,o,n){this._checkLabelName(e);var i=F.labels[e].style;i.stroke=o,i.strokeThickness=n,i.fill=t,i.shadowStroke=0<n,F.labels[e].setStyle(i)},this.setLabelBackgroundColor=function(e,t){this._checkLabelName(e);var o=F.labels[e].style;o.backgroundColor=t,F.labels[e].setStyle(o)},this.setLabelWordWrap=function(e,t,o){this._checkLabelName(e);var n=F.labels[e].style;n.wordWrap=t,n.wordWrapWidth=o||100,F.labels[e].setStyle(n)},this.setLabelPos=function(e,t,o){this._checkLabelName(e),checkNAN(t,"X Position"),checkNAN(o,"Y Position"),F.labels[e].cameraOffset=new Phaser.Point(t,o)},this.setLabelAlignment=function(e,t,o){this._checkLabelName(e);var n=F.labels[e].style,i=(n.boundsAlignH=o,n.boundsAlignV=t,0),r=0;switch(o){case"left":i=0;break;case"center":i=.5;break;case"right":i=1}switch(t){case"top":r=0;break;case"middle":r=.5;break;case"bottom":r=1}F.labels[e].anchor.setTo(i,r),F.labels[e].setStyle(n)},this._checkLabelName=function(e){if("string"!=typeof e)throw"Label name must be of type text, instead it was a "+typeof e+"with value '"+e+"'";if(!e.match(/^[A-Z]/i))throw"Label name must begin with a letter, '"+e+"' does not."},this.getLabelXPos=function(e){return F.labels[e].x},this.getLabelYPos=function(e){return F.labels[e].y},this.getWidth=function(){return F.width},this.getHeight=function(){return F.height},this.findActorById=function(e){try{return this.findActor(F.game._getActorTypeById(e).name)}catch(e){throw"Cannot find actor: "+e}},this.findActorsById=function(e){try{return this.findActors(F.game._getActorTypeById(e).name)}catch(e){throw"Cannot find actor: "+e}},this.findActor=function(e){for(var t=0;t<F.actors.length;t++){var o=F.actors[t];if(o.alive&&o.name===e)return o}return null},this.findActors=function(e){for(var t=[],o=0;o<F.actors.length;o++){var n=F.actors[o];n.alive&&n.name===e&&t.push(n)}return t},this.startTimer=function(e,t,o){checkNAN(e,"Time in seconds"),checkNAN(t,"Number of repeats"),F.game._phaserGame.time.events.add(Phaser.Timer.SECOND*e,function(){F.active&&(o.call(F),t)&&F.active&&F.startTimer(e,t,o)},F)},this.setSceneGravity=function(e,t){checkNAN(e,"X Gravity"),checkNAN(t,"Y Gravity");var o=0,e=(e&&(leap.log("Setting X Gravity to: "+e),o=e/F.game._phaserGame.physics.box2d.ptmRatio*-1),0);t&&(leap.log("Setting Y Gravity to: "+t),e=t/F.game._phaserGame.physics.box2d.ptmRatio*-1),F.game._phaserGame.physics.box2d.world.SetGravity({x:o,y:e})},this.setDebugRendering=function(e){F._isDebugRendering=e,F.game._phaserGame.debug.reset()},this.isDebugRendering=function(){return F._isDebugRendering},this.enableVirtualController=function(e,t){F._virtualController.enable(F,e,t)},this.disableVirtualController=function(){F._virtualController.disable()},this.isVirtualControllerEnabled=function(){return F._virtualController.isActive()}},Actor=function(t,e){this.classType="Actor";var g=this;if(g.game=t,g.def=e,g.id=e.id,g.uid=t._nextActorUid++,g.name=e.name,g.alive=!0,g._animations=[],g._scaleX=1,g._scaleY=1,g.speechBubble=null,g._collidedWithInLoop=[],g._collisionSensors=[],g._collisionTasks=[],g.hitAbove=!1,g.hitBelow=!1,g.hitLeft=!1,g.hitRight=!1,g.isSensor=!1,codeblocks.addCustomFunctions(g),codeblocks.addCustomVariables(g),g.def.animations)for(var o=0;o<g.def.animations.length;o++){var n=g.def.animations[o];!n.isDefault&&this._defaultAnimation||(this._defaultAnimation=n),this._animations[n.name]=n}this.update=function(){if(g._collidedWithInLoop=[],g.alive&&!g._disableUpdates){for(var e=0;e<g._collisionTasks.length;e++){var t=g._collisionTasks[e];g.collisionDirection=t.side,"actor"==t.type?(g.collidedWith=t.collidedWith,codeblocks.executeFunctionWithErrorHandling(g,t.func),g.collidedWith=null):(t.type="tile",codeblocks.executeFunctionsOfTypeWithErrorHandling(g,"onCollisionWithTile"))}g.collisionDirection=null,g._collisionTasks=[],codeblocks.executeFunctionsOfTypeWithErrorHandling(g,"onUpdate"),g.speechBubble&&this._positionSpeechBubble()}},this._init=function(e,t,o,n,i){this.scene=e,this.sprite=this.scene._actorGroup.create(t,o,this._defaultAnimation.spriteSheetId),this._scaleX=n?Math.max(g.game._minInitialActorScale,Math.min(n,g.game._maxInitialActorScale)):1,this._scaleY=i?Math.max(g.game._minInitialActorScale,Math.min(i,g.game._maxInitialActorScale)):1,this.sprite.body.actor=g,this.sprite.friction=1;for(var r,s=codeblocks.findFunctionsOfType(g,"onKeyDown"),a=0;a<s.length;a++){var l=s[a];g.game.keys[l.params.key].onDown.add(function(){codeblocks.executeFunctionWithErrorHandling(g,this)}.bind(l),this)}function c(e,t,o,n,i){var r,s=new box2d.b2WorldManifold;return i.GetWorldManifold(s),o=o==i.GetFixtureA()?(r=s.normal.x,s.normal.y):(r=-s.normal.x,-s.normal.y),.99<=r*r+o*o?Math.abs(r)>Math.abs(o)?r<0?"Right":"Left":o<0?"Down":"Up":null}var d=codeblocks.findFunctionsOfType(g,"onCollisionWithActor"),u=(d&&d.length&&(g.sprite.body.setCategoryPostsolveCallback(this.game.ACTOR_GROUP_CATEGORY,function(e,t,o,n,i,r){if(t.actor&&g.alive&&t.actor.alive)for(var s=0;s<g._collisionTasks.length;s++){var a,l=g._collisionTasks[s];l.collidedWith===t.actor&&(a=c(0,0,o,0,i),l.side=a)}},this),g.sprite.body.setCategoryContactCallback(this.game.ACTOR_GROUP_CATEGORY,function(e,t,o,n,i,r){if(t.actor&&i&&g.alive&&t.actor.alive&&g._collidedWithInLoop.indexOf(t.actor.uid)<0){g._collidedWithInLoop.push(t.actor.uid);for(var s=0;s<d.length;s++){var a=d[s];(a.params.actorType&&a.params.actorType.id===t.actor.id||t.actor.id===a.params.actorTypeId)&&g._collisionTasks.push({type:"actor",collidedWith:t.actor,func:a})}}},this)),codeblocks.hasFunctionsOfType(g,"onCollisionWithTile")&&g.sprite.body.setCategoryContactCallback(this.game.TILE_GROUP_CATEGORY,function(e,t,o,n,i,r){i&&(i=c(0,0,o,0,r),g._collisionTasks.push({type:"tile",side:i}))},g),codeblocks.hasFunctionsOfType(g,"onMouseDown")&&(g.sprite.inputEnabled=!0,g.sprite.events.onInputDown.add(function(e){codeblocks.executeFunctionsOfTypeWithErrorHandling(g,"onMouseDown")},g)),codeblocks.hasFunctionsOfType(g,"onMouseDownScene")&&g.game._phaserGame.input.onDown.add(function(e){g.scene._virtualController._containsPoint(e.worldX,e.worldY)||codeblocks.executeFunctionsOfTypeWithErrorHandling(g,"onMouseDownScene")},g),codeblocks.findFunctionsOfType(g,"onTimerOnce"));if(u&&u.length)for(r=0;r<u.length;r++){var h=u[r];g.startTimer(h.params.time,!1,function(){codeblocks.executeFunctionWithErrorHandling(g,this)}.bind(h))}var m=codeblocks.findFunctionsOfType(g,"onTimerRepeat");if(m&&m.length)for(r=0;r<m.length;r++){var p=m[r];g.startTimer(p.params.time,!0,function(){codeblocks.executeFunctionWithErrorHandling(g,this)}.bind(p))}g._defaultAnimation&&g.playAnimation(g._defaultAnimation.name,!0),g.setKeepInWorld(!1),e.lastCreatedActor=this,codeblocks.executeFunctionsOfTypeWithErrorHandling(g,"onCreate")},this.makeCameraFollow=function(){g.game._phaserGame.camera.follow(g.sprite)},this.setKeepInWorld=function(e){g.sprite.body.collideWorldBounds=e},this.keepInWorld=function(e){g.setKeepInWorld(e)},this.setCanRotate=function(e){g.sprite.body.fixedRotation=!e},this.setAffectedByGravity=function(e){g.sprite.body.gravityScale=e?1:0},this.getXPosition=function(){return g.sprite.body.x},this.setXPosition=function(e){checkNAN(e,"X Position"),g.sprite.body.x=e},this.getYPosition=function(){return g.sprite.body.y},this.setYPosition=function(e){checkNAN(e,"Y Position"),g.sprite.body.y=e},this.isLocated=function(e,t){switch(t){case"left":return g.sprite.body.x<e.sprite.body.x;case"right":return g.sprite.body.x>e.sprite.body.x;case"above":return g.sprite.body.y<e.sprite.body.y;case"below":return g.sprite.body.y>e.sprite.body.y;default:return!1}},this.setScale=function(e,t){checkNAN(e,"X Scale"),checkNAN(t,"Y Scale"),g._scaleX=e,g._scaleY=t,g.playAnimation(g.currentAnimation.name,g.currentAnimation.loop,!0)},this.getXScale=function(){return g._scaleX},this.getYScale=function(){return g._scaleY},this.setXSpeed=function(e){checkNAN(e,"X Speed"),g.sprite.body.velocity.x=e},this.getXSpeed=function(){return g.sprite.body.velocity.x},this.setYSpeed=function(e){checkNAN(e,"Y Speed"),g.sprite.body.velocity.y=e},this.getYSpeed=function(){return g.sprite.body.velocity.y},this.setVelocity=function(e,t){checkNAN(e,"X Velocity"),checkNAN(t,"Y Velocity"),this.sprite.body.velocity.x=e,this.sprite.body.velocity.y=t},this.isBlockedLeft=function(){return g.hitLeft},this.isBlockedRight=function(){return g.hitRight},this.isBlockedUp=function(){return g.hitAbove},this.isBlockedDown=function(){return g.hitBelow},this.setSpeed=function(e){checkNAN(e,"Speed"),this.sprite.body.moveForward(e)},this.setSpinSpeed=function(e){checkNAN(e,"Spin Speed"),this.sprite.body.rotateRight(e)},this.getDirection=function(){return this.sprite.body.angle},this.setDirection=function(e){checkNAN(e,"Direction"),this.sprite.body.angle=e},this.setThrust=function(e){checkNAN(e,"Thrust Speed"),this.sprite.body.thrust(e)},this.setDrag=function(e){checkNAN(e,"Drag"),this.sprite.body.linearDamping=e},this.turnAround=function(){this.sprite.body.rotation-=Math.PI},this.faceTowardsMouse=function(){this.faceTowardsPoint(t.getMouseX(),t.getMouseY())},this.faceAwayFromMouse=function(){this.faceTowardsMouse(),this.turnAround()},this.faceTowardsActor=function(e){this.faceTowardsPoint(e.sprite.body.x,e.sprite.body.y)},this.faceAwayFromActor=function(e){this.faceTowardsActor(e),this.turnAround()},this.faceTowardsPoint=function(e,t){this.sprite.body.rotation=Math.atan2(t-this.sprite.body.y,e-this.sprite.body.x)+Math.PI/2},this.faceAwayFromPoint=function(e,t){this.faceTowardsPoint(e,t),this.turnAround()},this.reverseSpeed=function(){this.sprite.body.velocity.x=-this.sprite.body.velocity.x,this.sprite.body.velocity.y=-this.sprite.body.velocity.x},this.moveTowardsMouse=function(e){this.moveTowardsPoint(t.getMouseX(),t.getMouseY(),e)},this.moveAwayFromMouse=function(e){this.moveTowardsMouse(e),this.reverseSpeed()},this.moveTowardsActor=function(e,t){this.moveTowardsPoint(e.sprite.body.x,e.sprite.body.y,t)},this.moveAwayFromActor=function(e,t){this.moveTowardsActor(e,t),this.reverseSpeed()},this.moveTowardsPoint=function(e,t,o){checkNAN(e,"X Position"),checkNAN(t,"Y Position"),checkNAN(o,"Speed");t=Math.atan2(t-this.sprite.body.y,e-this.sprite.body.x);this.sprite.body.velocity.x=o*Math.cos(t),this.sprite.body.velocity.y=o*Math.sin(t)},this.moveAwayFromPoint=function(e,t,o){this.moveTowardsPoint(e,t,o),this.reverseSpeed()},this.playAnimation=function(e,t,o){if(e&&g&&g.sprite.alive&&g.sprite.exists&&(null==g.currentAnimation||g.currentAnimation.name!==e||!0===o)){o=g._animations[e];if(!o)throw"Can't play/switch animation as "+g.name+" does not have an animation with name '"+e+"'";var n=g.sprite.body.collideWorldBounds;g.currentAnimation=o;try{g.sprite.loadTexture(o.spriteSheetId)}catch(e){return}var i=g.game.spriteSheets[o.spriteSheetId];(1<i.rows||1<i.columns)&&g.sprite.animations.add(o.name,o.frames,10),g.sprite.scale.setTo(o.scaleX?o.scaleX*g._scaleX:g._scaleX,o.scaleY?o.scaleY*g._scaleY:g._scaleY),o.collisionRect&&(g._rectangle={width:o.collisionRect.width*Math.abs(g.sprite.scale.x),height:o.collisionRect.height*Math.abs(g.sprite.scale.y),left:(o.collisionRect.left+(o.collisionRect.width-i.cellWidth)/2)*Math.abs(g.sprite.scale.x),top:(o.collisionRect.top+(o.collisionRect.height-i.cellHeight)/2)*Math.abs(g.sprite.scale.y)},o=Math.min(5,g._rectangle.width/4,g._rectangle.height/4),g._primeFixture=g.sprite.body.setPolygon([g._rectangle.left-g._rectangle.width/2,g._rectangle.top-g._rectangle.height/2+o,g._rectangle.left-g._rectangle.width/2+o,g._rectangle.top-g._rectangle.height/2,g._rectangle.left+g._rectangle.width/2-o,g._rectangle.top-g._rectangle.height/2,g._rectangle.left+g._rectangle.width/2,g._rectangle.top-g._rectangle.height/2+o,g._rectangle.left+g._rectangle.width/2,g._rectangle.top+g._rectangle.height/2-o,g._rectangle.left+g._rectangle.width/2-o,g._rectangle.top+g._rectangle.height/2,g._rectangle.left-g._rectangle.width/2+o,g._rectangle.top+g._rectangle.height/2,g._rectangle.left-g._rectangle.width/2,g._rectangle.top+g._rectangle.height/2-o]),g._primeFixture.SetSensor(g.isSensor),this._updateCollisionSensors(g)),this.sprite.body.setCollisionCategory(2),g.setKeepInWorld(n)}g.currentAnimation.loop=t,g.sprite.animations.play(e,null,t)},this.getAnimation=function(){return g.currentAnimation.name},this.stopAnimation=function(){g.sprite.animations.stop()},this._updateCollisionSensors=function(){g.currentAnimation&&g._rectangle&&(g._collisionSensors&&g._collisionSensors.forEach(function(e){g.setFixtureContactCallback(e,null,this),g.sprite.body.removeFixture(e)}),g._collisionSensors.up=g.sprite.body.addRectangle(.95*g._rectangle.width,1,g._rectangle.left+1,-1*g._rectangle.height/2+g._rectangle.top),g._collisionSensors.down=g.sprite.body.addRectangle(.95*g._rectangle.width,1,g._rectangle.left+1,g._rectangle.height/2+g._rectangle.top),g._collisionSensors.left=g.sprite.body.addRectangle(1,.95*g._rectangle.height,-1*g._rectangle.width/2+g._rectangle.left,g._rectangle.top+1),g._collisionSensors.right=g.sprite.body.addRectangle(1,.95*g._rectangle.height,g._rectangle.width/2+g._rectangle.left,g._rectangle.top+1),g._collisionSensors.up.SetSensor(!0),g._collisionSensors.down.SetSensor(!0),g._collisionSensors.left.SetSensor(!0),g._collisionSensors.right.SetSensor(!0),g.sprite.body.setFixtureContactCallback(g._collisionSensors.up,this._aboveCallback,this),g.sprite.body.setFixtureContactCallback(g._collisionSensors.down,this._belowCallback,this),g.sprite.body.setFixtureContactCallback(g._collisionSensors.left,this._leftCallback,this),g.sprite.body.setFixtureContactCallback(g._collisionSensors.right,this._rightCallback,this))},this._aboveCallback=function(e,t,o,n,i){g.hitAbove=i},this._belowCallback=function(e,t,o,n,i){g.hitBelow=i},this._leftCallback=function(e,t,o,n,i){g.hitLeft=i},this._rightCallback=function(e,t,o,n,i){g.hitRight=i},this.createActorById=function(e,t,o){return this.scene.createActorById(e,t||0,o||0)},this.createActor=function(e,t,o){return this.scene.createActor(e,t||0,o||0)},this.remove=function(){this.alive=!1,this.sprite.destroy()},this.setSensor=function(e){g.isSensor=e,g._primeFixture.SetSensor(e)},this.startTimer=function(e,t,o){return g.game._phaserGame.time.events.add(Phaser.Timer.SECOND*e,function(){g.alive&&(o.call(g),t)&&g.alive&&g.startTimer(e,t,o)},g)},this.getDistanceToActor=function(e){return Phaser.Math.distance(g.sprite.body.x,g.sprite.body.y,e.sprite.body.x,e.sprite.body.y)},this.findNearestActor=function(t,e){if(checkNAN(e,"Distance"),this.scene.actors){var o=[];if(this.scene.actors.forEach(function(e){e.name===t&&e!==this&&o.push(e)}),o.length)return o.sort(function(e,t){e=g.getDistanceToActor(e),t=g.getDistanceToActor(t);return t<=e?e===t?0:1:-1}),!e||g.getDistanceToActor(o[0])<=e?o[0]:null}return null},this._drawSpeechBubble=function(e){g.speechBubble&&g.speechBubble.box&&g.speechBubble.box.destroy(),g.speechBubble&&g.speechBubble.text&&g.speechBubble.text.destroy();var t=g.game._phaserGame.add.graphics(0,0);(e=g.game._phaserGame.add.text(0,0,e||"",{font:"13px Arial",fill:"#000000",backgroundColor:"#ffffff",wordWrap:!0,wordWrapWidth:200})).anchor.setTo(.5),t.lineStyle(0),t.beginFill(16777215),t.drawRoundedRect(0,0,e.width+20,e.height+20),t.endFill(),g.speechBubble={text:e,box:t},this._positionSpeechBubble()},this.setSpeechBubbleText=function(e){this.showSpeechBubble(e)},this.showSpeechBubble=function(e){this._drawSpeechBubble(e),g.speechBubble&&g.speechBubble.box&&g.speechBubble.text&&(g.speechBubble.box.visible=!0,g.speechBubble.text.visible=!0)},this.hideSpeechBubble=function(){g.speechBubble&&(g.speechBubble.box.visible=!1,g.speechBubble.text.visible=!1)},this._positionSpeechBubble=function(){var e=g.speechBubble.text,t=g.speechBubble.box;e.x=Math.floor(g.sprite.body.x+g._rectangle.width),e.y=g.sprite.body.y-e.height-25,t.x=e.x-10-e.width/2,t.y=e.y-10-e.height/2}},VirtualController=function(s){this.classType="VirtualController";var m=this;m.game=s,m._active=!1,m._components=[],this._update=function(){var e,t,o;m._active&&(e=m.currentAnchorX,t=m.currentAnchorY,o=m.scene,this._destroy(),this._init(o,e,t))},this._init=function(e,t,o){var n,u,h;function i(e){var t,o=m.game._phaserGame.input.worldX,n=m.game._phaserGame.input.worldY,o=o-u.x,n=n-u.y,i={},r=null!=h.up,s=null!=h.down,a=null!=h.left,l=null!=h.right,c=l||a,d=r||s;return(Math.abs(o)<=u.width/2&&Math.abs(n)<=u.height/2||c||d)&&(t=o*o+n*n<=144,e||!t?(e=Math.atan2(n,o),t&&!c||(e<Math.PI/3&&e>-Math.PI/3?i.right=!0:e>2*Math.PI/3||e<-2*Math.PI/3?i.left=!0:t&&(i.left=a,i.right=l)),t&&!d||(e>Math.PI/6&&e<5*Math.PI/6?i.down=!0:e<-Math.PI/6&&e>-5*Math.PI/6?i.up=!0:t&&(i.up=r,i.down=s))):i.spacebar=!0),i}function r(e,t){for(var o in h){var n=t[o];delete t[o],n||(i=h[o])&&(delete h[o],i.processKeyUp(e))}for(var o in t){var i=m.game.keys[o];t[o]&&(i.processKeyDown(e),h[o]=i)}}t===m.currentAnchorX&&o===m.currentAnchorY&&m._active||(m.currentAnchorX=t,m.currentAnchorY=o,this.scene=e,n=e=0,t="right"===t?(e=s._phaserGame.camera.width-60,"R"):(e=60,"L"),o="bottom"===o?(n=s._phaserGame.camera.height-60,"B"):(n=60,"T"),u=this.scene._interfaceGroup.create(e,n,m.game._virtualControllerGraphicPrefix+"Base-"+o+t),this.baseSprite=u,m._components.push({name:"_base",role:"display",sprite:u}),m._components.push({name:"spacebar",role:"button",sprite:this.scene._interfaceGroup.create(e,n,m.game._virtualControllerGraphicPrefix+"Action")}),m._components.push({name:"down",role:"button",sprite:this.scene._interfaceGroup.create(e,n+30+3,m.game._virtualControllerGraphicPrefix+"Down")}),m._components.push({name:"up",role:"button",sprite:this.scene._interfaceGroup.create(e,n-30-3,m.game._virtualControllerGraphicPrefix+"Up")}),m._components.push({name:"left",role:"button",sprite:this.scene._interfaceGroup.create(e-30-3,n,m.game._virtualControllerGraphicPrefix+"Left")}),m._components.push({name:"right",role:"button",sprite:this.scene._interfaceGroup.create(e+30+3,n,m.game._virtualControllerGraphicPrefix+"Right")}),h={},u.inputEnabled=!0,u.enableDrag=!1,u.events.onInputDown.add(function(e){r(e,i())}),u.events.onInputUp.add(function(e){r(e,{})}),u.events.onInputOver.add(function(e){m.game._phaserGame.input.activePointer.isDown&&r(e,i())}),this.moveCallback=function(e){m.game._phaserGame.input.activePointer.isDown&&r(e,i(!0))},m.game._phaserGame.input.addMoveCallback(this.moveCallback),m._components.forEach(function(e){e.sprite.anchor.x=.5,e.sprite.anchor.y=.5,e.sprite.fixedToCamera=!0,"button"===e.role&&e.sprite.scale.setTo(.7,.7)}),m._active=!0)},this._destroy=function(){m._active&&(m._components.forEach(function(e){e.sprite.destroy()}),this.moveCallback&&m.game._phaserGame.input.deleteMoveCallback(this.moveCallback),m.currentAnchorY=null,m.currentAnchorX=null,m.scene=null,m._components=[],m._active=!1)},this._containsPoint=function(e,t){return!(!this._active||!this.baseSprite)&&(e=e-this.baseSprite.x,t=t-this.baseSprite.y,Math.abs(e)<this.baseSprite.width/2)&&Math.abs(t)<this.baseSprite.height/2},this.enable=function(e,t,o){this._init(e,t,o)},this.disable=function(){this._destroy()},this.isActive=function(){return m._active}},Presentation=function(n){this.classType="Presentation";var i=this;i.game=n,i.connections=[],i.sendMessage=function(e){for(var t in i.connections)"string"!=typeof e?i.connections[t].send(JSON.stringify(e,getCircularReplacer())):i.connections[t].send(e)},i.handleMessage=function(e){var t=JSON.parse(e.data);switch(t.type){case"restart":n.restartScene(),i.sendMessage({type:"restart",payload:!0});break;case"update":for(var o in t.payload)n[o]=t.payload[o];i.sendMessage({type:"update",payload:!0})}},i.addConnection=function(e){e.addEventListener("message",i.handleMessage),e.addEventListener("close",function(e){console.log("Connection closed!",e.reason)}),i.connections.push(e)},navigator.presentation&&navigator.presentation.receiver&&navigator.presentation.receiver.connectionList.then(function(e){e.connections.map(function(e){return i.addConnection(e)}),e.addEventListener("connectionavailable",function(e){i.addConnection(e.connection)})})},CodeModuleReader=function(e){this.classType="CodeModuleReader";function o(e,t,o){return{id:e,type:"onUpdate",codeMode:"typed",params:null,disabled:!1,code:`this.size = this.getXScale();
this.speed = ${t} * Math.pow(this.size, -0.439);
this.speed = Math.min(this.speed, ${t});`+(o?"\nthis.moveTowardsMouse(this.speed);":""),blocks:null,nextBlockId:null}}function n(e,t){return{id:e,type:"onCollisionWithActor",codeMode:"typed",params:{actorTypeId:d.checkNulls(t)},disabled:!1,code:"this.game.resize(this, this.collidedWith);",blocks:null,nextBlockId:null}}var d=this,r=(d.game=e,d.defaultVariablePrefix="_mod_default_",d.handleModulesForOwner=function(e){d.handleModulesForOwnerDef(e.def,e.classType)},d.handleModulesForOwnerDef=function(e,t){if(e.activeCodeModules=e.activeCodeModules||[],e.codeModules&&e.codeModules.length)for(var o=0;o<e.codeModules.length;o++){var n=e.codeModules[o];n.disabled?leap.log("Disabled module "+n.name+" on "+e.name+" skipped"):-1<e.activeCodeModules.indexOf(n.type)?leap.log("Module of type "+n.type+" already active for owner"):(leap.log("Converting module of type "+n.type+" for owner "+e.name),d.convertModuleToFunctions(n,e,t))}},d.convertModuleToFunctions=function(e,t,o){var n=[];if("Actor"===o)switch(e.type){case"movementViaArrowKeys":n=d.convertMovementViaArrowKeysModuleToFunctions(e,t);break;case"movement":n=d.convertUniversalMovementModuleToFunctions(e,t,!0);break;case"superSlimerHero":n=d.convertSuperSlimerHeroToFunctions(e,t);break;case"superSlimerPotion":n=d.convertSuperSlimerPotionToFunctions(e,t);break;case"superSlimerBaddie":n=d.convertSuperSlimerBaddieToFunctions(e,t);break;case"jetPackJamPlayer":n=d.convertJetPackJamPlayerToFunctions(e,t);break;case"jetPackJamCoin":n=d.convertJetPackJamCoinToFunctions(e,t);break;case"slimeRoyalePlayer":n=d.convertSlimeRoyalePlayerToFunctions(e,t);break;case"slimeRoyaleBaddie":n=d.convertSlimeRoyaleBaddieToFunctions(e,t);break;case"slimeRoyaleFood":n=d.convertSlimeRoyaleFoodToFunctions(e,t);break;case"whackAMoleMole":n=d.convertWhackAMoleMoleToFunctions(e,t);break;case"whackAMoleHole":n=d.convertWhackAMoleHoleToFunctions(e,t);break;case"whackAMoleCoin":n=d.convertWhackAMoleCoinToFunctions(e,t);break;case"whackAMoleHammer":n=d.convertWhackAMoleHammerToFunctions(e,t);break;case"dragonRiderPlayer":n=d.convertDragonRiderPlayerToFunctions(e,t);break;case"dragonRiderEgg":n=d.convertDragonRiderEggToFunctions(e,t);break;case"dragonRiderPowerUp":n=d.convertDragonRiderPowerUpToFunctions(e,t);break;case"dragonRiderFireball":n=d.convertDragonRiderFireballToFunctions(e,t);break;case"dragonRiderBaddie":n=d.convertDragonRiderBaddieToFunctions(e,t);break;case"hungerPaloozaPlayer":n=d.convertHungerPaloozaPlayerToFunctions(e,t);break;case"hungerPaloozaFood":n=d.convertHungerPaloozaFoodToFunctions(e,t);break;case"gravityWarriorsExplorer":n=d.convertGravityWarriorsExplorerToFunctions(e,t);break;case"gravityWarriorsSpike":n=d.convertGravityWarriorsSpikeToFunctions(e,t);break;case"gravityWarriorsPowerUp":n=d.convertGravityWarriorsPowerUpToFunctions(e,t);break;case"gravityWarriorsDragon":n=d.convertGravityWarriorsDragonToFunctions(e,t);break;case"gravityWarriorsPrincess":n=d.convertGravityWarriorsPrincessToFunctions(e,t);break;case"whiteboardPen":n=d.convertWhiteboardPenToFunctions(e,t);break;case"whiteboardColour":n=d.convertWhiteboardColourToFunctions(e,t);break;case"whiteboardEraser":n=d.convertWhiteboardEraserToFunctions(e,t);break;case"whiteboardMirror":n=d.convertWhiteboardMirrorToFunctions(e,t);break;case"robotRhythmSymbol":n=d.convertRobotRhythmSymbolToFunctions(e,t);break;case"robotRhythmDancer":n=d.convertRobotRhythmDancerToFunctions(e,t);break;case"orbitJumperGravity":n=d.convertOrbitJumperGravityToFunctions(e,t);break;case"orbitJumperSlider":n=d.convertOrbitJumperSliderToFunctions(e,t);break;case"orbitJumperPlayer":n=d.convertOrbitJumperPlayerToFunctions(e,t);break;case"rlglTrafficLight":n=d.convertRlglTrafficLightToFunctions(e,t);break;case"rlglPlayer":n=d.convertRlglPlayerToFunctions(e,t);break;case"rlglFinish":n=d.convertRlglFinishToFunctions(e,t);break;case"carrotClickerCarrot":n=d.convertCarrotClickerCarrotToFunctions(e,t);break;case"carrotClickerCoin":n=d.convertCarrotClickerCoinToFunctions(e,t);break;case"carrotClickerPower":n=d.convertCarrotClickerPowerToFunctions(e,t);break;case"carrotClickerAutoClick":n=d.convertCarrotClickerAutoClickToFunctions(e,t);break;case"carrotClickerAutoSpeed":n=d.convertCarrotClickerAutoSpeedToFunctions(e,t);break;case"carrotClickerJackpot":n=d.convertCarrotClickerJackpotToFunctions(e,t);break;case"simonButton":n=d.convertSimonButtonToFunctions(e,t);break;case"mazePlayer":n=d.convertMazePlayerToFunctions(e,t);break;default:return void leap.log("Found unsupported module for actor with type "+e.type)}else{if("Scene"!==o)return void leap.log("Found unsupported class type for module "+e.type+" with class type "+o);switch(e.type){case"spaceInvaders":n=d.convertSpaceInvadersSetUpToFunctions(e,t);break;case"superSlimerLevel":n=d.convertSuperSlimerLevelToFunctions(e,t);break;case"jetPackJamLevel":n=d.convertJetPackJamLevelToFunctions(e,t);break;case"slimeRoyaleLevel":n=d.convertSlimeRoyaleLevelToFunctions(e,t);break;case"whackAMoleMainLevel":n=d.convertWhackAMoleMainLevelToFunctions(e,t);break;case"whackAMoleWinLevel":n=d.convertWhackAMoleWinLevelToFunctions(e,t);break;case"whiteboardLevel":n=d.convertWhiteboardLevelToFunctions(e,t);break;case"robotRhythmMainLevel":n=d.convertRobotRhythmMainLevelToFunctions(e,t);break;case"robotRhythmRestartLevel":n=d.convertRobotRhythmRestartLevelToFunctions(e,t);break;case"carrotClickerLevel":n=d.convertCarrotClickerLevelToFunctions(e,t);break;case"simonLevel":n=d.convertSimonLevelToFunctions(e,t);break;case"mazeLevel":n=d.convertMazeLevelToFunctions(e,t);break;default:return void leap.log("Found unsupported module for scene with type "+e.type)}}for(var i=0;i<n.length;i++)n[i].moduleId=e.id,n[i].name=e.name;t.codeFunctions=t.codeFunctions?n.concat(t.codeFunctions):n,t.activeCodeModules.push(e.type),leap.log("Converted module of type "+e.type+" for owner "+t.name)},d.readParams=function(e){for(var t={},o=0;o<e.params.length;o++)t[e.params[o].name]=d.readParam(e.params[o]);return t},d.readParam=function(e){return null!=e.value?e.value:{value:e.defaultValue}},d.checkNulls=function(e){return e||{value:null}},d.checkNullVariables=function(e,t){return e&&e.expression&&e.expression.variable?e.expression.variable:e&&e.value?{name:e.value}:{name:d.defaultVariablePrefix+t}},d.getVariableAutoScope=function(e,t){var o="getGameVar";return{type:o=e&&e.expression&&e.expression.type?e.expression.type:o,logicBlock:!0,variable:d.checkNullVariables(e,t)}},d.setVariableAutoScope=function(e,t,o,n){var i,r,s=null!=n&&"owner"===n?"setOwnerVar":"setGameVar";return"object"==typeof o?i=o:r=o,{type:s=!n&&e&&e.expression&&"getOwnerVar"===e.expression.type?"setOwnerVar":s,variable:d.checkNullVariables(e,t),expression:i,value:r}},d.convertParamsToVariables=function(e,t,o){var n,i,r=[];for(n in t)t.hasOwnProperty(n)&&(i=d.checkNulls(t[n]),r.push(d.setVariableAutoScope(null,n,i.expression||i.value,o)));return{id:e,name:"Create",type:"onCreate",codeMode:"block",disabled:!1,blocks:r}},d.randomNumberJson=function(e,t){return{type:"random",logicBlock:!0,group:"math",leftCondition:e,rightCondition:t}},d.smallSceneOffsetJson=function(e,t){return{expression:{type:"minus",logicBlock:!0,group:"math",leftCondition:{expression:{type:d.checkNulls(e),logicBlock:!0,group:"scene",units:"Pixels"}},rightCondition:{value:d.checkNulls(t)}}}},d.setOwnerVarJson=function(e,t,o){var n=o.value||null;return{id:e,type:"onCreate",codeMode:"block",params:null,disabled:!1,code:null,blocks:[{type:"setOwnerVar",variable:{name:t},logicBlock:!1,group:"variables",expression:o.expression||null,value:n}],nextBlockId:null}},d.setGameVarJson=function(e,t,o){var n=o.value||null;return{id:e,type:"onCreate",codeMode:"block",params:null,disabled:!1,code:null,blocks:[{type:"setGameVar",variable:{name:t},logicBlock:!1,group:"variables",expression:o.expression||null,value:n}],nextBlockId:null}},d.convertMovementViaArrowKeysModuleToFunctions=function(e,t){return d.convertUniversalMovementModuleToFunctions(e,t,!1)},d.convertUniversalMovementModuleToFunctions=function(e,t,o){var e=d.readParams(e),n=e.sceneGravityY||{value:800},i=e.maxNumberOfJumps&&(e.maxNumberOfJumps.expression||null!==e.maxNumberOfJumps.value&&""!==e.maxNumberOfJumps.value)?e.maxNumberOfJumps:{value:Number.MAX_SAFE_INTEGER},n=[l(t.nextCodeFunctionId++,n),r(t.nextCodeFunctionId++,e.xSpeed,e.rightAnimation,e.leftAnimation,e.heroFaceRight),s(t.nextCodeFunctionId++,e.ySpeed,i,e.jumpCount),a(t.nextCodeFunctionId++,e.jumpCount)];return o&&n.push(c(t.nextCodeFunctionId++,e.virtualControllerAnchorY,e.virtualControllerAnchorX)),n},function(e,t,o,n,i){return{id:e,type:"onUpdate",codeMode:"block",disabled:!1,blocks:[{type:"if",group:"logic",id:1,expression:{type:"keyIsDown",logicBlock:!0,group:"input",id:2,key:"right"},blocks:[{type:"setXSpeed",speed:d.checkNulls(t),targetObject:{value:"this"}},{type:"playAnimation",loop:"true",targetObject:{value:"this"},animationName:d.checkNulls(o)},d.setVariableAutoScope(i,"heroFaceRight",!0)]},{type:"elseif",group:"logic",expression:{type:"keyIsDown",logicBlock:!0,group:"input",key:"left"},blocks:[{type:"setXSpeed",speed:{expression:{type:"multiply",logicBlock:!0,leftCondition:d.checkNulls(t),rightCondition:{value:"-1"}}},targetObject:{value:"this"}},{type:"playAnimation",loop:"true",targetObject:{value:"this"},animationName:d.checkNulls(n)},d.setVariableAutoScope(i,"heroFaceRight",!1)]},{type:"else",blocks:[{type:"setXSpeed",group:"actor",id:8,speed:{value:"0"},targetObject:{value:"this"}}]}]}}),s=function(e,t,o,n){return{id:e,type:"onKeyDown",codeMode:"block",params:{key:"up"},disabled:!1,blocks:[{type:"if",blocks:[{type:"setYSpeed",speed:{expression:{type:"multiply",logicBlock:!0,leftCondition:{value:"-1"},rightCondition:d.checkNulls(t)}},targetObject:{value:"this"}},d.setVariableAutoScope(n,"jumpCount",{type:"plus",logicBlock:!0,leftCondition:{expression:d.getVariableAutoScope(n,"jumpCount")},rightCondition:{value:"1"}})],expression:{type:"lt",logicBlock:!0,leftCondition:{expression:d.getVariableAutoScope(n,"jumpCount")},rightCondition:d.checkNulls(o)}}]}},a=function(e,t){return{id:e,type:"onCollisionWithTile",codeMode:"block",disabled:!1,blocks:[d.setVariableAutoScope(t,"jumpCount",0)]}},l=function(e,t){return{type:"onCreate",id:e,codeMode:"block",disabled:!1,blocks:[{type:"setCanRotate",value:"false",group:"actor",targetObject:{value:"this"}},{type:"setAffectedByGravity",value:"true",targetObject:{value:"this"}},{type:"setSceneGravity",logicBlock:!1,x:{value:"0"},y:d.checkNulls(t)}]}},c=function(e,t,o){return{id:e,type:"onCreate",codeMode:"block",disabled:!1,blocks:[{type:"if",expression:{type:"isTouchAvailable",logicBlock:!0},blocks:[{type:"enableVirtualController",anchorY:t||"bottom",anchorX:o||"left"}]}]}},u=(d.convertSpaceInvadersSetUpToFunctions=function(e,t){var e=d.readParams(e),o="this."+d.defaultVariablePrefix+"playerActorName",n="this."+d.defaultVariablePrefix+"enemyActorNameList",i="this."+d.defaultVariablePrefix+"enemyProjectileActorName",r="this."+d.defaultVariablePrefix+"barrierActorName",s="this."+d.defaultVariablePrefix+"gameOverSceneName",a="this."+d.defaultVariablePrefix+"minSpeed",l="this."+d.defaultVariablePrefix+"maxSpeed",c=d.defaultVariablePrefix+"barrierActorLives";return[d.convertParamsToVariables(t.nextCodeFunctionId++,e,"owner"),u(t.nextCodeFunctionId++,o,n,r,c,a,l,1.25,32,.1,.5,i,300,5,3,10,0,1,.3,.1,.9,1,.8),h(t.nextCodeFunctionId++,s),m(t.nextCodeFunctionId++)]},function(e,t,o,n,i,r,s,a,l,c,d,u,h,m,p,g,f,b,y,v,k,x,C){return{id:e,name:"Create",type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.minSpeed=Number("+r+"),this.maxSpeed=Number("+s+"),this._difficultyIncrease="+a+",this._fallAmount="+l+",this._startRowGen=this.getHeight()*"+c+",this._endRowGen=this.getHeight()*"+d+",this._enemyProjectileSpeed="+h+",this._enemyInitialProjectileDelay="+m+",this._enemyMinProjectileDelay="+p+",this._enemyMaxProjectileDelay="+g+",this._barrierStartX="+f+",this._barrierEndX=this.getWidth()*"+b+",this._barrierCoverage="+y+",this._enemyStartX=this.getWidth()*"+v+",this._enemyEndX=this.getWidth()*"+k+",this._enemyCoverage="+x+",this.game.waveCount=this.game.waveCount?this.game.waveCount:1,this.game.topScore=this.game.topScore?this.game.topScore:0,this.game.score=this.game.score?this.game.score:0,this.game.barrierYPosition=this.getHeight()*"+C+",this.gameOver=!1,this.rows=[],this.evenlySpaceActorsOnXAxis=function(e,t,i,s,r,a){var o=[],n=this.createActor(e,-100,-100),h=n.sprite.body.actor._rectangle.width;n.remove();for(var c=i-t,l=Math.ceil(Math.floor(c/h)*s),m=(c-h*l)/(l+1),g=0;g<l;g++){var d=this.createActor(e,t+m+(g*(h+m)+h/2),r);null!==a&&a(d),o.push(d)}return o},this.game.player=this.createActor("+t+",.5*this.getWidth(), this.game.barrierYPosition + .1*this.getHeight()),this.evenlySpaceActorsOnXAxis("+n+",this._barrierStartX,this._barrierEndX,this._barrierCoverage,this.game.barrierYPosition,function(e){e.lives=e.scene."+i+"?e.scene."+i+":0}),this.getEnemies=function(){for(var e=[],t=0;t<this.actors.length;t++)this.actors[t].alive&&"+o+".indexOf(this.actors[t].name)>-1&&e.push(this.actors[t]);return e},this.handleEnemyCollision=function(e,t,i,s,r,a){e.actor.scene.doHandleEnemyCollision&&e.actor.scene.doHandleEnemyCollision(e,t)},this.doHandleEnemyCollision=function(e,t){e.actor.alive&&(t.actor.name==="+n+"?(t.actor.remove(),e.actor.remove()):t.actor.name==="+t+"&&(this.game._phaserGame.camera.flash(0,300),this.gameOver=!0))},this.handleEnemyProjectileCollision=function(e,t,i,s,r,a){e.actor.scene.doHandleEnemyProjectileCollision&&e.actor.scene.doHandleEnemyProjectileCollision(e,t)},this.doHandleEnemyProjectileCollision=function(e,t){e.actor.alive&&(t.actor.name==="+n+"?(e.actor.remove(),t.actor.lives--,t.actor.sprite.alpha/=2,(!t.actor.lives||t.actor.lives<=0)&&t.actor.remove()):t.actor.name==="+t+"&&(this.game._phaserGame.camera.flash(0,300),this.gameOver=!0))},this.triggerEnemyProjectile=function(e){this.startTimer(e,!1,function(){var t=this.getEnemies();if(t&&t.length){var i=t[this.game.randomNumber(t.length-1)],s=this.createActor("+u+",i.getXPosition(),i.getYPosition());s.sprite.body.setCategoryContactCallback(this.game.ACTOR_GROUP_CATEGORY,this.handleEnemyProjectileCollision),s.setSensor(!0),s.setYSpeed(this._enemyProjectileSpeed),e=this.game.randomNumber(this._enemyMinProjectileDelay,this._enemyMaxProjectileDelay),this.triggerEnemyProjectile(e)}})},this.onCreateBaddie=function(e){e.scene.doOnCreateBaddie(e)},this.doOnCreateBaddie=function(e){e.sprite.body.setCategoryContactCallback(this.game.ACTOR_GROUP_CATEGORY,this.handleEnemyCollision),e.setSensor(!0)},this.getRowSpeed=function(){return this.minSpeed + (this.maxSpeed - this.minSpeed) * (this.startingEnemies?1-this.getEnemies().length/this.startingEnemies:0)},this.createEnemies=function(){this.rows=[];for(var e=this._startRowGen;e<this._endRowGen;){var t={enemies:[],enemyType:this.game.randomChoice("+o+"),direction:1},i=this.createActor(t.enemyType,-100,-100),s=i.sprite.body.actor._rectangle.height;i.remove(),t.enemies=this.evenlySpaceActorsOnXAxis(t.enemyType,this._enemyStartX,this._enemyEndX,this._enemyCoverage,e,this.onCreateBaddie),this.rows.push(t),e+=s}this.startingEnemies=this.getEnemies().length,this.speed=this.getRowSpeed(this.rows[0]),this.triggerEnemyProjectile(this._enemyInitialProjectileDelay)},this.createEnemies();",blocks:null}}),h=function(e,t){return{id:e,name:"Move",type:"onUpdate",codeMode:"typed",disabled:!1,code:"if(this.game.newTopScore=this.game.score>this.game.topScore,this.getEnemies().length<=0)this.game.waveCount++,this.minSpeed*=this._difficultyIncrease,this.maxSpeed*=this._difficultyIncrease,this.game.restartScene();else if(this.gameOver)this.game.newTopScore&&(this.game.topScore=this.game.score),this.game.score=0,this.game.waveCount=0,"+t+"?this.game.goToSceneWithName("+t+"):this.game.restartScene();else if(this.rows){for(var directionChange=!1,i=0;i<this.rows.length;i++){for(var minAlive=null,maxAlive=null,j=0;j<this.rows[i].enemies.length;j++)this.rows[i].enemies[j]&&this.rows[i].enemies[j].alive&&(minAlive=null===minAlive?j:minAlive,maxAlive=null===maxAlive||j>=maxAlive?j:maxAlive,this.rows[i].enemies[j].setXSpeed(this.rows[i].direction*this.speed));null!==minAlive&&this.rows[i].enemies[minAlive].getYPosition()>this.getHeight()||null!==maxAlive&&this.rows[i].enemies[maxAlive].getYPosition()>this.getHeight()?(this.game._phaserGame.camera.flash(0,300),this.gameOver=!0):(null!==minAlive&&this.rows[i].enemies[minAlive].getXPosition()<=this.rows[i].enemies[minAlive].sprite.body.actor._rectangle.width/2||null!==maxAlive&&this.rows[i].enemies[maxAlive].getXPosition()>this.getWidth()-this.rows[i].enemies[maxAlive].sprite.body.actor._rectangle.width/2)&&(directionChange=!0)}if(directionChange){for(i=0;i<this.rows.length;i++){this.speed=this.getRowSpeed(),this.rows[i].direction*=-1;for(j=0;j<this.rows[i].enemies.length;j++)this.rows[i].enemies[j]&&this.rows[i].enemies[j].alive&&(this.rows[i].enemies[j].setXSpeed(this.rows[i].direction*this.speed),this.rows[i].enemies[j].setYPosition(this.rows[i].enemies[j].getYPosition()+this._fallAmount))}directionChange=!1}}",blocks:null}},m=function(e){return{id:e,name:"Labelling",type:"onUpdate",codeMode:"typed",disabled:!1,code:'var primaryColor="#0091EA",secondaryColor="#EA6F00",outlineColor="#FFFFFF",scoreColor=this.game.newTopScore?secondaryColor:primaryColor,labelsToCenter=[],labelsToRightAlign=[];if(this.showLabel("Wave",10,10,"Wave "+this.game.waveCount),this.setLabelFont("Wave","bold",24,"SimianTextChimpanzee, Arial"),this.setLabelFontColor("Wave",secondaryColor,outlineColor,7),this.showLabel("Score",10,40,"Score:  "+this.game.score),this.setLabelFont("Score","bold",24,"SimianTextChimpanzee, Arial"),this.setLabelFontColor("Score",scoreColor,outlineColor,7),this.game.score>this.game.topScore?(this.showLabel("scoreToBeat",10,70,"Keep Going!"),this.setLabelFont("scoreToBeat","bold",24,"SimianTextChimpanzee, Arial"),this.setLabelFontColor("scoreToBeat",secondaryColor,outlineColor,7)):(this.showLabel("scoreToBeat",10,70,"Beat "+(this.game.topScore?this.game.topScore:"0")),this.setLabelFont("scoreToBeat","bold",24,"SimianTextChimpanzee, Arial"),this.setLabelFontColor("scoreToBeat",primaryColor,outlineColor,7)),labelsToCenter.length)for(var idx in labelsToCenter){if(this.labels[labelsToCenter[idx]])(style=this.labels[labelsToCenter[idx]].style).boundsAlignH="center",style.boundsAlignV="middle",this.labels[labelsToCenter[idx]].style=style,this.labels[labelsToCenter[idx]].anchor.setTo(.5)}if(labelsToRightAlign.length)for(var idx in labelsToRightAlign){var style;if(this.labels[labelsToRightAlign[idx]])(style=this.labels[labelsToRightAlign[idx]].style).boundsAlignH="right",style.boundsAlignV="middle",this.labels[labelsToRightAlign[idx]].style=style,this.labels[labelsToRightAlign[idx]].anchor.setTo(1,0)}',blocks:null}},i=(d.convertSuperSlimerHeroToFunctions=function(e,t){e=d.readParams(e);return[i(t.nextCodeFunctionId++,e.leftXPosition,e.rightXPosition,e.rightXSpeed,e.leftXSpeed,e.noMovementXSpeed,{value:30}),p(t.nextCodeFunctionId++,e.ySpeed),g(t.nextCodeFunctionId++,{value:800})]},function(e,t,o,n,i,r,s){return{id:e,type:"onUpdate",codeMode:"block",params:null,disabled:!1,code:null,blocks:[{type:"if",group:"logic",expression:{type:"gt",logicBlock:!0,group:"logic",leftCondition:{expression:{type:"getXPosition",logicBlock:!0,group:"actor",targetObject:{value:"this"}}},rightCondition:{expression:{type:"sceneWidth",logicBlock:!0,group:"scene",units:"Pixels"}}},blocks:[{type:"setXPosition",group:"actor",targetObject:{value:"this"},position:d.checkNulls(t)}]},{type:"if",group:"logic",expression:{type:"lt",logicBlock:!0,group:"logic",leftCondition:{expression:{type:"getXPosition",logicBlock:!0,group:"actor",targetObject:{value:"this"}}},rightCondition:{value:"0"}},blocks:[{type:"setXPosition",group:"actor",targetObject:{value:"this"},position:d.checkNulls(o)}]},{type:"if",group:"logic",expression:{type:"isMouseRightOfActor",logicBlock:!0,group:"input",targetObject:{value:"this"}},blocks:[{type:"setXSpeed",group:"actor",speed:d.checkNulls(n),targetObject:{value:"this"}}]},{type:"elseif",group:"logic",expression:{type:"isMouseLeftOfActor",logicBlock:!0,group:"input",targetObject:{value:"this"}},blocks:[{type:"setXSpeed",group:"actor",speed:d.checkNulls(i),targetObject:{value:"this"}}]},{type:"else",group:"logic",blocks:[{type:"setXSpeed",group:"actor",speed:d.checkNulls(r),targetObject:{value:"this"}}]},{type:"if",group:"logic",expression:{type:"lt",logicBlock:!0,group:"logic",leftCondition:{expression:{type:"getYPosition",logicBlock:!0,group:"actor",targetObject:{value:"this"}}},rightCondition:d.checkNulls(s)},blocks:[{type:"goToNextScene",group:"scene"}]}]}}),p=function(e,t){return{id:e,type:"onCollisionWithTile",codeMode:"block",params:null,disabled:!1,code:null,blocks:[{type:"setYSpeed",group:"actor",id:0,speed:{expression:{type:"multiply",logicBlock:!0,leftCondition:{value:"-1"},rightCondition:d.checkNulls(t)}},targetObject:{value:"this"}}]}},g=function(e,t){return{id:e,type:"onCreate",codeMode:"block",params:null,disabled:!1,code:null,blocks:[{type:"setCanRotate",value:"false",group:"actor",id:1,targetObject:{value:"this"}},{type:"makeCameraFollow",group:"actor",id:2,targetObject:{value:"this"}},{type:"setSceneGravity",logicBlock:!1,group:"scene",id:3,x:{value:"0"},y:d.checkNulls(t)}]}},f=(d.convertSuperSlimerBaddieToFunctions=function(e,t){d.readParams(e);e=d.randomNumberJson({value:-150},{value:150});return[f(t.nextCodeFunctionId++,e),b(t.nextCodeFunctionId++),y(t.nextCodeFunctionId++,"ac0")]},function(e,t){return{id:e,type:"onCreate",codeMode:"block",params:null,disabled:!1,code:null,blocks:[{type:"setAffectedByGravity",value:"false",group:"actor",targetObject:{value:"this"}},{type:"setSensor",value:"true",group:"actor",targetObject:{value:"this"}},{type:"setXSpeed",group:"actor",speed:{expression:d.checkNulls(t)},targetObject:{value:"this"}}]}}),b=function(e){return{id:e,type:"onUpdate",codeMode:"block",params:null,disabled:!1,code:null,blocks:[{type:"if",group:"logic",expression:{type:"gt",logicBlock:!0,group:"logic",leftCondition:{expression:{type:"getXPosition",logicBlock:!0,group:"actor",targetObject:{value:"this"}}},rightCondition:{expression:{type:"sceneWidth",logicBlock:!0,group:"scene",units:"Pixels"}}},blocks:[{type:"setXPosition",group:"actor",targetObject:{value:"this"},position:{value:"0"}}]},{type:"elseif",group:"logic",expression:{type:"lt",logicBlock:!0,group:"logic",leftCondition:{expression:{type:"getXPosition",logicBlock:!0,group:"actor",targetObject:{value:"this"}}},rightCondition:{value:"0"}},blocks:[{type:"setXPosition",group:"actor",targetObject:{value:"this"},position:{expression:{type:"sceneWidth",logicBlock:!0,group:"scene",units:"Pixels"}}}]}]}},y=function(e,t){return{id:e,type:"onCollisionWithActor",codeMode:"block",params:{actorTypeId:d.checkNulls(t)},disabled:!1,code:null,blocks:[{type:"restartScene",group:"scene"}]}},v=(d.convertSuperSlimerPotionToFunctions=function(e,t){d.readParams(e);return[v(t.nextCodeFunctionId++),k(t.nextCodeFunctionId++,"ac0"),x(t.nextCodeFunctionId++),C(t.nextCodeFunctionId++,"ac1")]},function(e){return{id:e,type:"onCreate",codeMode:"block",params:null,disabled:!1,code:null,blocks:[{type:"setSensor",value:"true",group:"actor",targetObject:{value:"this"}},{type:"setAffectedByGravity",value:"false",group:"actor",targetObject:{value:"this"}}]}}),k=function(e,t){return{id:e,type:"onCollisionWithActor",codeMode:"block",params:{actorTypeId:d.checkNulls(t)},disabled:!1,code:null,blocks:[{type:"removeActor",group:"actor",targetObject:{value:"this"}}]}},x=function(e){return{id:e,type:"onCollisionWithTile",codeMode:"block",params:null,disabled:!1,code:null,blocks:[{type:"removeActor",group:"actor",targetObject:{value:"this"}}]}},C=function(e,t){return{id:e,type:"onCollisionWithActor",codeMode:"block",params:{actorTypeId:d.checkNulls(t)},disabled:!1,code:null,blocks:[{type:"removeActor",group:"actor",targetObject:{value:"this"}}]}},F=(d.convertSuperSlimerLevelToFunctions=function(e,t){d.readParams(e);var e=d.randomNumberJson({value:5},{value:25}),o=d.randomNumberJson({value:5},{value:15}),n=d.smallSceneOffsetJson("sceneWidth",10),n=d.randomNumberJson({value:10},n),i=d.smallSceneOffsetJson("sceneHeight",10),i=d.randomNumberJson({value:10},i);return[F(t.nextCodeFunctionId++,e,n,i,"ac1"),F(t.nextCodeFunctionId++,o,n,i,"ac2")]},function(e,t,o,n,i){return{id:e,type:"onCreate",codeMode:"block",params:null,disabled:!1,code:null,blocks:[{type:"loop",group:"logic",expression:d.checkNulls(t),blocks:[{type:"createActor",group:"actor",x:{expression:d.checkNulls(o)},y:{expression:d.checkNulls(n)},actorTypeId:d.checkNulls(i)}]}]}}),S=(d.convertJetPackJamPlayerToFunctions=function(e,t){e=d.readParams(e);return[S(t.nextCodeFunctionId++,{value:800},e.xSpeed,e.scale),A(t.nextCodeFunctionId++,e.ySpeed),T(t.nextCodeFunctionId++),B(t.nextCodeFunctionId++,"ac1"),_(t.nextCodeFunctionId++)]},function(e,t,o,n){return{id:e,type:"onCreate",codeMode:"block",params:null,disabled:!1,code:null,blocks:[{type:"setSceneGravity",logicBlock:!1,group:"scene",x:{value:"0"},y:d.checkNulls(t)},{type:"makeCameraFollow",group:"actor",targetObject:{value:"this"}},{type:"setXSpeed",group:"actor",speed:d.checkNulls(o),targetObject:{value:"this"}},{type:"setScale",group:"actor",targetObject:{value:"this"},x:d.checkNulls(n),y:d.checkNulls(n)}]}}),A=function(e,t){return{id:e,type:"onMouseDownScene",codeMode:"block",params:null,disabled:!1,code:null,blocks:[{type:"setYSpeed",group:"actor",speed:d.checkNulls(t),targetObject:{value:"this"}}]}},T=function(e){return{id:e,type:"onCollisionWithTile",codeMode:"block",params:null,disabled:!1,code:null,blocks:[{name:"Hit Tile",type:"customFunction",codeMode:"block",params:{funcName:"hitTile"},blocks:[],data:{type:"custom",func:{funcName:"hitTile"}},group:"custom"}]}},B=function(e,t){return{id:e,type:"onCollisionWithActor",codeMode:"block",params:{actorTypeId:d.checkNulls(t)},disabled:!1,code:null,blocks:[{name:"Collect",type:"customFunction",codeMode:"block",params:{funcName:"collect"},blocks:[],data:{type:"custom",func:{funcName:"collect"}},group:"custom"}]}},_=function(e){return{id:e,type:"onUpdate",codeMode:"block",params:null,disabled:!1,code:null,blocks:[{type:"if",group:"logic",expression:{type:"gt",logicBlock:!0,group:"logic",leftCondition:{expression:{type:"getXPosition",logicBlock:!0,group:"actor",targetObject:{value:"this"}}},rightCondition:{expression:{type:"sceneWidth",logicBlock:!0,group:"scene",units:"Pixels"}}},blocks:[{name:"Next Level",type:"customFunction",codeMode:"block",params:{funcName:"nextLevel"},blocks:[],data:{type:"custom",func:{funcName:"nextLevel"}},group:"custom"}]},{type:"if",group:"logic",expression:{type:"lt",logicBlock:!0,group:"logic",leftCondition:{expression:{type:"getYPosition",logicBlock:!0,group:"actor",targetObject:{value:"this"}}},rightCondition:{value:"0"}},blocks:[{name:"Hit Tile",type:"customFunction",codeMode:"block",params:{funcName:"hitTile"},blocks:[],data:{type:"custom",func:{funcName:"hitTile"}},group:"custom"}]},{type:"if",group:"logic",expression:{type:"gt",logicBlock:!0,group:"logic",leftCondition:{expression:{type:"getYPosition",logicBlock:!0,group:"actor",targetObject:{value:"this"}}},rightCondition:{value:"",expression:{type:"sceneHeight",logicBlock:!0,group:"scene",units:"Pixels"}}},blocks:[{name:"Hit Tile",type:"customFunction",codeMode:"block",params:{funcName:"hitTile"},blocks:[],data:{type:"custom",func:{funcName:"hitTile"}},group:"custom"}]}]}},w=(d.convertJetPackJamCoinToFunctions=function(e,t){return[w(t.nextCodeFunctionId++),M(t.nextCodeFunctionId++,"ac1"),I(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"block",params:null,disabled:!1,code:null,blocks:[{type:"setAffectedByGravity",value:"false",group:"actor",targetObject:{value:"this"}},{type:"setSensor",value:"true",group:"actor",targetObject:{value:"this"}}]}}),M=function(e,t){return{id:e,type:"onCollisionWithActor",codeMode:"block",params:{actorTypeId:d.checkNulls(t)},disabled:!1,code:null,blocks:[{type:"removeActor",group:"actor",targetObject:{value:"this"}}]}},I=function(e){return{id:e,type:"onCollisionWithTile",codeMode:"block",params:null,disabled:!1,code:null,blocks:[{type:"removeActor",group:"actor",targetObject:{value:"this"}}]}},N=(d.convertJetPackJamLevelToFunctions=function(e,t){var o=d.randomNumberJson({value:"5"},{value:"10"}),n=d.smallSceneOffsetJson("sceneWidth",10),n=d.randomNumberJson({value:"10"},n),i=d.smallSceneOffsetJson("sceneHeight",10),i=d.randomNumberJson({value:"10"},i);return[N(t.nextCodeFunctionId++,"ac1",o,n,i)]},function(e,t,o,n,i){return{id:e,type:"onCreate",codeMode:"block",params:null,disabled:!1,code:null,blocks:[{type:"loop",group:"logic",expression:d.checkNulls(o),blocks:[{type:"createActor",group:"actor",x:{expression:d.checkNulls(n)},y:{expression:d.checkNulls(i)},actorTypeId:d.checkNulls(t)}]}]}}),P=(d.convertSlimeRoyalePlayerToFunctions=function(e,t){return[P(t.nextCodeFunctionId++,.2),o(t.nextCodeFunctionId++,400,!0),n(t.nextCodeFunctionId++,"ac2")]},function(e,t){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:`this.setScale(${t}, ${t});
this.setKeepInWorld(true);
this.makeCameraFollow();
this.playAnimation(this.game.randomNumber(1, 4));

var width = this.scene.width;
var height = this.scene.height;
var scene = this.scene;

var randomNum = function() {
    return {
        x: Math.random() * width,
        y: Math.random() * height
    };
};

this.game.resize = function(cell, other) {
    var r1 = cell.getXScale();
    var r2 = other.getXScale();
    var r3 = Math.sqrt(r1 * r1 + r2 * r2);
    
    cell.setScale(r3, r3);
    var type = other.name;
    var rand = randomNum();
    scene.createActor(type, rand.x, rand.y);
    other.remove();
};`,blocks:null,nextBlockId:null}}),L=(d.convertSlimeRoyaleBaddieToFunctions=function(e,t){return[o(t.nextCodeFunctionId++,400,!1),L(t.nextCodeFunctionId++,"ac0"),V(t.nextCodeFunctionId++,"ac1"),n(t.nextCodeFunctionId++,"ac2"),G(t.nextCodeFunctionId++),R(t.nextCodeFunctionId++)]},function(e,t){return{id:e,type:"onCollisionWithActor",codeMode:"typed",params:{actorTypeId:d.checkNulls(t)},disabled:!1,code:"if (this.size > this.collidedWith.getXScale()) {\n    this.collidedWith.remove();\n    this.startTimer(2, false, function() {\n       this.game.restartScene(); \n    });\n} else {\n    this.game.resize(this.collidedWith, this);\n}",blocks:null,nextBlockId:null}}),V=function(e,t){return{id:e,type:"onCollisionWithActor",codeMode:"typed",params:{actorTypeId:d.checkNulls(t)},disabled:!1,code:"if (this.size > this.collidedWith.getXScale()) {\n   this.game.resize(this, this.collidedWith)\n}",blocks:null,nextBlockId:null}},G=function(e){return{id:e,type:"customFunction",codeMode:"typed",params:{funcName:"direction"},disabled:!1,code:'var chance = this.game.randomNumber(0, 100);\nif (chance < 50) {\n    var len = this.scene.findActors("Food").length - 1;\n    if (len > 0) {\n        var index = this.game.randomNumber(0, len);\n        this.moveTowardsActor(this.scene.findActors("Food")[index], this.speed);\n    }\n} else if (chance < 80) {\n    var len = this.scene.findActors("Baddie").length - 1;\n    if (len > 0) {\n        var index = this.game.randomNumber(0, len);\n        this.moveTowardsActor(this.scene.findActors("Baddie")[index], this.speed);\n    }\n} else if (this.scene.findActors("Player").length > 0) {\n    this.moveTowardsActor(this.scene.findActor("Player"), this.speed);\n}',blocks:null,nextBlockId:null}},R=function(e){return{id:e,type:"onCreate",codeMode:"block",params:null,disabled:!1,code:null,blocks:[{type:"setOwnerVar",variable:{name:"size"},group:"variables",expression:{type:"divide",logicBlock:!0,group:"math",leftCondition:{expression:{type:"random",logicBlock:!0,group:"math",leftCondition:{value:"2",expression:null},rightCondition:{value:"20",expression:null}}},rightCondition:{value:"10",expression:null}}},{type:"setScale",group:"actor",targetObject:{value:"this",expression:{type:"getThis",logicBlock:!0,group:"variables"}},x:{value:"",expression:{type:"getOwnerVar",logicBlock:!0,group:"variables",variable:{name:"size"}}},y:{expression:{type:"getOwnerVar",logicBlock:!0,group:"variables",variable:{name:"size"}}}},{type:"keepInWorld",value:"true",group:"actor",targetObject:{value:"this",expression:{type:"getThis",logicBlock:!0,group:"variables"}}},{type:"playAnimation",loop:"true",group:"actor",targetObject:{value:"this",expression:{type:"getThis",logicBlock:!0,group:"variables"}},animationName:{expression:{type:"random",logicBlock:!0,group:"math",leftCondition:{value:"1",expression:null},rightCondition:{value:"6",expression:null}}}},{type:"customFunction",func:{funcName:"direction"},group:"custom",name:"direction",codeMode:"typed",params:{funcName:"direction"},disabled:!1,code:'var chance = this.game.randomNumber(0, 100);\nif (chance < 50) {\n    var len = this.scene.findActors("Food").length - 1;\n    if (len > 0) {\n        var index = this.game.randomNumber(0, len);\n        this.moveTowardsActor(this.scene.findActors("Food")[index], this.speed);\n    }\n} else if (chance < 80) {\n    var len = this.scene.findActors("Baddie").length - 1;\n    if (len > 0) {\n        var index = this.game.randomNumber(0, len);\n        this.moveTowardsActor(this.scene.findActors("Baddie")[index], this.speed);\n    }\n} else if (this.scene.findActors("Player").length > 0) {\n    this.moveTowardsActor(this.scene.findActor("Player"), this.speed);\n}',blocks:null,nextBlockId:null},{type:"timer",group:"logic",repeat:"true",expression:{type:"divide",logicBlock:!0,group:"math",leftCondition:{expression:{type:"random",logicBlock:!0,group:"math",leftCondition:{value:"2",expression:null},rightCondition:{value:"20",expression:null}}},rightCondition:{value:"10",expression:null}},blocks:[{type:"customFunction",func:{funcName:"direction"},group:"custom",name:"direction",codeMode:"typed",params:{funcName:"direction"},disabled:!1,code:'var chance = this.game.randomNumber(0, 100);\nif (chance < 50) {\n    var len = this.scene.findActors("Food").length - 1;\n    if (len > 0) {\n        var index = this.game.randomNumber(0, len);\n        this.moveTowardsActor(this.scene.findActors("Food")[index], this.speed);\n    }\n} else if (chance < 80) {\n    var len = this.scene.findActors("Baddie").length - 1;\n    if (len > 0) {\n        var index = this.game.randomNumber(0, len);\n        this.moveTowardsActor(this.scene.findActors("Baddie")[index], this.speed);\n    }\n} else if (this.scene.findActors("Player").length > 0) {\n    this.moveTowardsActor(this.scene.findActor("Player"), this.speed);\n}',blocks:null,nextBlockId:null}]}]}},H=(d.convertSlimeRoyaleFoodToFunctions=function(e,t){return[H(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"block",params:null,disabled:!1,code:null,blocks:[{type:"setScale",group:"actor",targetObject:{value:"this",expression:{type:"getThis",logicBlock:!0,group:"variables"}},x:{value:"0.2"},y:{value:"0.2"}},{type:"setSensor",value:"true",group:"actor",targetObject:{value:"this",expression:{type:"getThis",logicBlock:!0,group:"variables"}}},{type:"playAnimation",loop:"true",group:"actor",targetObject:{value:"this",expression:{type:"getThis",logicBlock:!0,group:"variables"}},animationName:{expression:{type:"random",logicBlock:!0,group:"math",leftCondition:{value:"0"},rightCondition:{value:"4"}}}}]}}),j=(d.convertSlimeRoyaleLevelToFunctions=function(e,t){return[j(t.nextCodeFunctionId++,"ac0"),W(t.nextCodeFunctionId++)]},function(e,t){return{id:e,type:"onCreate",codeMode:"block",disabled:!1,code:null,blocks:[{type:"createActor",group:"actor",x:{expression:{type:"random",logicBlock:!0,group:"math",leftCondition:{value:"0",expression:null},rightCondition:{expression:{type:"sceneWidth",logicBlock:!0,group:"scene",units:"Pixels"}}}},y:{expression:{type:"random",logicBlock:!0,group:"math",leftCondition:{value:"0"},rightCondition:{expression:{type:"sceneHeight",logicBlock:!0,group:"scene",units:"Pixels"}}}},actorTypeId:t},{type:"log",logicBlock:!1,group:"logic",expression:null,value:"Created "+t}]}}),W=function(e){return{id:e,type:"onTimerRepeat",codeMode:"typed",params:{time:"10"},disabled:!1,code:"for (var i = 0; i < 10; i++) {\n    var num = this.findActors('Baddie').length;\n    if (num < 1 || num > 9) break;\n    this.createActor('Baddie', this.game.randomNumber(0, this.width), this.game.randomNumber(0, this.height));\n}\n\nfor (var i = 0; i < 100; i++) {\n    var num = this.findActors('Food').length;\n    if (num < 1 || num > 99) break;\n    this.createActor('Food', this.game.randomNumber(0, this.width), this.game.randomNumber(0, this.height));\n}",blocks:null,nextBlockId:null}},X=(d.convertWhackAMoleMainLevelToFunctions=function(e,t){return[X(t.nextCodeFunctionId++),Y(t.nextCodeFunctionId++),D(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.game.firstCreate = true;\nthis.game.money = 0;\nthis.game.timeLeft = 15;",blocks:null,nextBlockId:null}}),Y=function(e){return{id:e,type:"onUpdate",codeMode:"block",params:null,disabled:!1,code:null,blocks:[{type:"showLabel",group:"ui",name:{value:"money",expression:null},x:{value:"",expression:{type:"minus",logicBlock:!0,group:"math",leftCondition:{expression:{type:"divide",logicBlock:!0,group:"math",leftCondition:{expression:{type:"sceneWidth",logicBlock:!0,group:"scene",units:"Pixels"}},rightCondition:{value:"2",expression:null}}},rightCondition:{value:"10",expression:null}}},y:{value:"",expression:{type:"minus",logicBlock:!0,group:"math",leftCondition:{expression:{type:"sceneHeight",logicBlock:!0,group:"scene",units:"Pixels"}},rightCondition:{value:"42",expression:null}}},text:{expression:{type:"andText",logicBlock:!0,group:"ui",leftCondition:{value:"$",expression:null},rightCondition:{expression:{type:"getGameVar",logicBlock:!0,group:"variables",variable:{name:"money",defaultValue:"0"}}}}}},{type:"setLabelFontColor",group:"ui",name:{value:"money",expression:null},strokeThickness:{value:"0",expression:null},strokeColor:"#ffffff",color:"#ffffff"},{type:"setLabelFont",group:"ui",name:{value:"money",expression:null},size:{value:"24",expression:{type:"getGameVar",variable:{name:"labelSize",defaultValue:"24"},logicBlock:!0,group:"variables"}},style:"Lucida Sans Unicode",weight:"normal"},{type:"showLabel",group:"ui",name:{value:"time",expression:null},x:{expression:{type:"divide",logicBlock:!0,group:"math",leftCondition:{expression:{type:"sceneWidth",logicBlock:!0,group:"scene",units:"Pixels"}},rightCondition:{value:"2",expression:null}}},y:{value:"20",expression:null},text:{expression:{type:"getGameVar",logicBlock:!0,group:"variables",variable:{name:"timeLeft",defaultValue:"15"}}}},{type:"setLabelFontColor",group:"ui",name:{value:"time",expression:null},strokeThickness:{value:"0",expression:null},color:"#ffffff",strokeColor:"#ffffff"},{type:"setLabelFont",group:"ui",name:{value:"time",expression:null},size:{value:"24",expression:{type:"getGameVar",variable:{name:"labelSize",defaultValue:"24"},logicBlock:!0,group:"variables"}},weight:"normal",style:"Lucida Sans Unicode"}]}},D=function(e){return{id:e,type:"onTimerRepeat",codeMode:"typed",params:{time:"1"},disabled:!1,code:"this.game.timeLeft -= 1;\nif (this.game.timeLeft < 1) {\n    this.game.goToNextScene();\n}",blocks:null,nextBlockId:null}},U=(d.convertWhackAMoleWinLevelToFunctions=function(e,t){return[U(t.nextCodeFunctionId++),E(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"block",params:null,disabled:!1,code:null,blocks:[{type:"showLabel",group:"ui",name:{value:"finalScore"},x:{expression:{type:"minus",logicBlock:!0,group:"math",leftCondition:{expression:{type:"divide",logicBlock:!0,group:"math",leftCondition:{expression:{type:"sceneWidth",logicBlock:!0,group:"scene",units:"Pixels"}},rightCondition:{value:"2"}}},rightCondition:{value:"60"}}},y:{expression:{type:"divide",logicBlock:!0,group:"math",leftCondition:{expression:{type:"sceneHeight",logicBlock:!0,group:"scene",units:"Pixels"}},rightCondition:{value:"2"}}},text:{expression:{type:"andText",logicBlock:!0,group:"ui",leftCondition:{value:"You got $",expression:null},rightCondition:{expression:{type:"getGameVar",logicBlock:!0,group:"variables",variable:{name:"money",defaultValue:"0"}}}}}},{type:"showLabel",group:"ui",name:{value:"highScore"},x:{expression:{type:"minus",logicBlock:!0,group:"math",leftCondition:{expression:{type:"divide",logicBlock:!0,group:"math",leftCondition:{expression:{type:"sceneWidth",logicBlock:!0,group:"scene",units:"Pixels"}},rightCondition:{value:"2"}}},rightCondition:{value:"80"}}},y:{expression:{type:"plus",logicBlock:!0,group:"math",leftCondition:{expression:{type:"divide",logicBlock:!0,group:"math",leftCondition:{expression:{type:"sceneHeight",logicBlock:!0,group:"scene",units:"Pixels"}},rightCondition:{value:"2"}}},rightCondition:{value:"60"}}},text:{expression:{type:"andText",logicBlock:!0,group:"ui",leftCondition:{value:"High Score: $"},rightCondition:{expression:{type:"getGameVar",logicBlock:!0,group:"variables",variable:{name:"highScore",defaultValue:"0"}}}}}}]}}),E=function(e){return{id:e,type:"onMouseDown",codeMode:"typed",params:null,disabled:!1,code:"this.game.goToNextScene();",blocks:null,nextBlockId:null}},J=(d.convertWhackAMoleMoleToFunctions=function(e,t){var e=d.readParams(e),o=e.timeLeft.expression&&e.timeLeft.expression.variable?e.timeLeft.expression.variable.name:"missing",n=e.labelSize.value||10,i=e.timeRemaining.value||15,r=e.moneyUpdate.expression||0;return[z(t.nextCodeFunctionId++,n,o,i),K(t.nextCodeFunctionId++),J(t.nextCodeFunctionId++,e.money,r,e.highScore,"ac2"),$(t.nextCodeFunctionId++),q(t.nextCodeFunctionId++,"ac0")]},function(e,t,o,n,i){return{id:e,type:"onMouseDown",codeMode:"block",params:null,disabled:!1,code:null,blocks:[d.setVariableAutoScope(t,"money",o),{type:"if",group:"logic",expression:{type:"gt",logicBlock:!0,group:"logic",leftCondition:{expression:d.getVariableAutoScope(t,"money")},rightCondition:{expression:d.getVariableAutoScope(n,"highScore")}},blocks:[d.setVariableAutoScope(n,"highScore",d.getVariableAutoScope(t,"money"))]},{type:"removeActor",group:"actor",id:1,targetObject:{value:"this",expression:null}},{type:"createActor",group:"actor",x:{expression:{type:"getXPosition",logicBlock:!0,group:"actor",targetObject:{value:"this",expression:null}}},y:{expression:{type:"getYPosition",logicBlock:!0,group:"actor",targetObject:{value:"this",expression:null}}},actorTypeId:i}]}}),z=function(e,t,o,n){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:`this.setSensor(true);
this.setScale(0.1, 0.1);
this.game.labelSize = Math.abs(${t});
if (this.game.firstCreate != false) {
    this.game.firstCreate = false;
    this.game.${o} = Math.abs(${n});
}`,blocks:null,nextBlockId:null}},$=function(e){return{id:e,type:"onTimerRepeat",codeMode:"typed",params:{time:"0.001"},disabled:!1,code:"var x = this.getXScale();\nvar inc = 0.01;\nif (x < 0.95) {\n    this.setScale(x + inc, x + inc);\n}",blocks:null,nextBlockId:null}},K=function(e){return{id:e,type:"onTimerOnce",codeMode:"typed",params:{time:"1.4"},disabled:!1,code:"this.remove();",blocks:null,nextBlockId:null}},q=function(e,t){return{id:e,type:"onCollisionWithActor",codeMode:"typed",params:{actorTypeId:t},disabled:!1,code:"this.remove();",blocks:null,nextBlockId:null}},Q=(d.convertWhackAMoleHoleToFunctions=function(e,t){return[Q(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.setSensor(true);\nthis.startTimer(this.game.randomNumber(1, 10), true, function() {\n    this.scene.createActor('Mole', this.getXPosition(), this.getYPosition() - 20);\n});",blocks:null,nextBlockId:null}}),Z=(d.convertWhackAMoleCoinToFunctions=function(e,t){return[Z(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.setSensor(true);\nthis.setSpinSpeed(100);\nthis.moveTowardsPoint(this.scene.width / 2, this.scene.height, 1000);",blocks:null,nextBlockId:null}}),ee=(d.convertWhackAMoleHammerToFunctions=function(e,t){return[ee(t.nextCodeFunctionId++),te(t.nextCodeFunctionId++),oe(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.setSensor(true);\nthis.setDirection(30);",blocks:null,nextBlockId:null}}),te=function(e){return{id:e,type:"onMouseDownScene",codeMode:"typed",params:null,disabled:!1,code:"this.setDirection(270);\nthis.startTimer(0.2, false, function() {\n    this.setDirection(30);\n});",blocks:null,nextBlockId:null}},oe=function(e){return{id:e,type:"onUpdate",codeMode:"typed",params:null,disabled:!1,code:"this.setXPosition(this.game.getMouseX());\nthis.setYPosition(this.game.getMouseY());",blocks:null,nextBlockId:null}},ne=(d.convertDragonRiderPlayerToFunctions=function(e,t){var e=d.readParams(e),o=e.ySpeed,n=e.rightSpeed.value||0,i=e.leftSpeed.value||0,r=e.zeroSpeed.value||0,s=e.fireTime.value||0,a=e.speedBoost1.value||0,e=e.speedBoost2.value||0;return[ne(t.nextCodeFunctionId++,o),ie(t.nextCodeFunctionId++,n,i,r),re(t.nextCodeFunctionId++),se(t.nextCodeFunctionId++),ae(t.nextCodeFunctionId++),le(t.nextCodeFunctionId++,"ac2",s,a,e),ce(t.nextCodeFunctionId++)]},function(e,t){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:`this.gameUpdate = 0; this.makeCameraFollow();
this.setCanRotate(false);
this.setKeepInWorld(true);
this.speed = ${t};
this.fireTimeRemaining = 0;
this.speedUpRemaining = 0;
for (var i = 0; i < 10; i++) {
    this.scene.createActor("Baddie", this.game.randomNumber(0, this.scene.width), this.game.randomNumber(0, this.scene.height - 300));
}`,blocks:null,nextBlockId:null}}),ie=function(e,t,o,n){return{id:e,type:"onMouseDownScene",codeMode:"typed",params:null,disabled:!1,code:`if (this.game.isMouseRightOfActor(this)) {
    this.setXSpeed(${t});
} else if (this.game.isMouseLeftOfActor(this)) {
    this.setXSpeed(${o});
} else {
    this.setXSpeed(${n});
}

if (this.getXPosition() > this.scene.width - 32) {
    this.setXPosition(this.scene.width - 33);
} else if (this.getXPosition() < 32) {
    this.setXPosition(33);
}`,blocks:null,nextBlockId:null}},re=function(e){return{id:e,type:"onUpdate",codeMode:"block",params:null,disabled:!1,code:null,blocks:[{type:"setYSpeed",logicBlock:!1,group:"actor",speed:{expression:{type:"multiply",logicBlock:!0,group:"math",leftCondition:{expression:{type:"getOwnerVar",variable:{name:"speed",defaultValue:"-200"},logicBlock:!0,group:"variables"}},rightCondition:{value:"-1",expression:null}}},targetObject:{value:"this",expression:null}}]}},se=function(e){return{id:e,type:"onUpdate",codeMode:"typed",params:null,disabled:!1,code:"if (this.getYPosition() < 50) {\n    this.game.goToNextScene();\n}",blocks:null,nextBlockId:null}},ae=function(e){return{id:e,type:"onUpdate",codeMode:"typed",params:null,disabled:!1,code:"this.gameUpdate += 1; if (this.gameUpdate % 30 !== 0) return; if (this.fireTimeRemaining > 0) { this.fireTimeRemaining -= 0.5; this.scene.createActor('Fireball', this.getXPosition(), this.getYPosition() - 10); }",blocks:null,nextBlockId:null}},le=function(e,t,o,n,i){return{id:e,type:"onCollisionWithActor",codeMode:"typed",params:{actorTypeId:t},disabled:!1,code:`switch (this.collidedWith.getAnimation()) { case 1: case "1": this.fireTimeRemaining += Number(${o}); break; case 2: case "2": this.speed = ${n}; this.speedUpRemaining = 5; break; case 3: case "3": this.speed = ${i}; this.speedUpRemaining = 5; break; } this.collidedWith.remove();`,blocks:null,nextBlockId:null}},ce=function(e){return{id:e,type:"onTimerRepeat",codeMode:"typed",params:{time:"1"},disabled:!1,code:"if (this.speedUpRemaining > 0) {\n    this.speedUpRemaining -= 1;\n} else {\n    this.speed = 100;\n}",blocks:null,nextBlockId:null}},de=(d.convertDragonRiderEggToFunctions=function(e,t){return[de(t.nextCodeFunctionId++),ue(t.nextCodeFunctionId++,"ac0")]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.setSensor(true);",blocks:null,nextBlockId:null}}),ue=function(e,t){return{id:e,type:"onCollisionWithActor",codeMode:"typed",params:{actorTypeId:"ac0"},disabled:!1,code:"this.remove();",blocks:null,nextBlockId:null}},he=(d.convertDragonRiderPowerUpToFunctions=function(e,t){return[he(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.animation = this.game.randomNumber(1, 3);\nthis.playAnimation(this.animation);\nthis.setSensor(true);",blocks:null,nextBlockId:null}}),me=(d.convertDragonRiderFireballToFunctions=function(e,t){return[me(t.nextCodeFunctionId++,-700),pe(t.nextCodeFunctionId++)]},function(e,t){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:`this.direction = 180;
this.setSensor(true);
this.setYSpeed(${t});`,blocks:null,nextBlockId:null}}),pe=function(e,t){return{id:e,type:"onTimerOnce",codeMode:"typed",params:{time:t},disabled:!1,code:"this.remove();",blocks:null,nextBlockId:null}},ge=(d.convertDragonRiderBaddieToFunctions=function(e,t){return[ge(t.nextCodeFunctionId++),fe(t.nextCodeFunctionId++,"2"),be(t.nextCodeFunctionId++,"ac0"),ye(t.nextCodeFunctionId++,"ac3")]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.setSensor(true);\nthis.setXSpeed(this.game.randomNumber(-100, 100));\nthis.setYSpeed(this.game.randomNumber(-100, 100));\n",blocks:null,nextBlockId:null}}),fe=function(e,t){return{id:e,type:"onTimerRepeat",codeMode:"typed",params:{time:t},disabled:!1,code:"this.setXSpeed(this.game.randomNumber(-100, 100));\nthis.setYSpeed(this.game.randomNumber(-100, 100));",blocks:null,nextBlockId:null}},be=function(e,t){return{id:e,type:"onCollisionWithActor",codeMode:"typed",params:{actorTypeId:t},disabled:!1,code:"this.game.restartScene();",blocks:null,nextBlockId:null}},ye=function(e,t){return{id:e,type:"onCollisionWithActor",codeMode:"typed",params:{actorTypeId:t},disabled:!1,code:"this.remove();\nthis.collidedWith.remove();",blocks:null,nextBlockId:null}},ve=(d.convertHungerPaloozaPlayerToFunctions=function(e,t){d.readParams(e);return[ve(t.nextCodeFunctionId++),ke(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onUpdate",codeMode:"typed",params:null,disabled:!1,code:'this.scene.showLabel(\'timer\', 20, 20, \'Time left: \' + this.timer);\n this.faceTowardsMouse();\nif (this.game.isMouseDown()) {\n    this.setSpeed(this.speed);\n    this.game.health -= 1;\n    this.playAnimation("Moving", true);\n} else {\n    this.setSpeed(0);\n    this.playAnimation("Still", true);\n}\n\nthis.showSpeechBubble(this.game.health);\n\nif (this.game.health < 1) {\n    this.game.goToSceneWithName("Level 1");\n}',blocks:null,nextBlockId:null}}),ke=function(e){return{id:e,type:"onTimerRepeat",codeMode:"typed",params:{time:"0.5"},disabled:!1,code:'this.halfSeconds = Number(this.halfSeconds) + 1;\nthis.game.health -= 1;\nif (this.halfSeconds % 2 !== 0) return;\nthis.timer -= 1;\nif (this.timer < 1) {\n    this.game.goToNextScene();\n    this.game.health -= 25;\n}\nif (this.halfSeconds % 20 !== 0) return;\nfor (var i = 0; i < 5; i++) {\n    this.scene.createActor("Food", this.game.randomNumber(0, this.scene.width), this.game.randomNumber(0, this.scene.height));\n}',blocks:null,nextBlockId:null}},xe=(d.convertHungerPaloozaFoodToFunctions=function(e,t){d.readParams(e);return[xe(t.nextCodeFunctionId++),Ce(t.nextCodeFunctionId++,"ac0")]},function(e){return{id:e,type:"onUpdate",codeMode:"typed",params:null,disabled:!1,code:"this.playAnimation(this.animation, true);\nthis.setScale(this.size / 10, this.size / 10);",blocks:null,nextBlockId:null}}),Ce=function(e,t){return{id:e,type:"onCollisionWithActor",codeMode:"typed",params:{actorTypeId:t},disabled:!1,code:"this.remove();\nthis.game.health += Number(this.yummyPoints);",blocks:null,nextBlockId:null}},Fe=(d.convertGravityWarriorsExplorerToFunctions=function(e,t){d.readParams(e);return[Fe(t.nextCodeFunctionId++),Se(t.nextCodeFunctionId++),Ae(t.nextCodeFunctionId++),Te(t.nextCodeFunctionId++),Be(t.nextCodeFunctionId++,"ac2")]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.gravityY = 1000;\nthis.speed = 200;\n\nthis.switch = function () {\n    if (!this.canSwitch) return;\n    var animation = this.getAnimation() == 'Up' ? 'Down' : 'Up';\n    this.playAnimation(animation, true);       \n    this.setDirection((this.getDirection() + 180) % 360);\n    this.gravityY *= -1;\n    this.canSwitch = false;\n};",blocks:null,nextBlockId:null}}),Se=function(e){return{id:e,type:"onUpdate",codeMode:"typed",params:null,disabled:!1,code:"this.game.heroXPos = this.getXPosition();\nthis.setXSpeed(this.speed);\nthis.scene.setSceneGravity(0, this.gravityY);\nthis.makeCameraFollow();\nthis.setAffectedByGravity(this.gravity);\nthis.setCanRotate(this.canRotate);\n\nif (this.getXPosition() > this.scene.width - 32) {\n    this.game.goToNextScene();\n}",blocks:null,nextBlockId:null}},Ae=function(e){return{id:e,type:"onMouseDownScene",codeMode:"typed",params:null,disabled:!1,code:"this.switch();",blocks:null,nextBlockId:null}},Te=function(e){return{id:e,type:"onKeyDown",codeMode:"typed",params:{key:"spacebar"},disabled:!1,code:"this.switch();",blocks:null,nextBlockId:null}},Be=function(e,t){return{id:e,type:"onCollisionWithActor",codeMode:"typed",params:{actorTypeId:t},disabled:!1,code:"this.collidedWith.remove();\nthis.speed = 100;\nthis.startTimer(5, false, function() {\n    this.speed = 200; \n});",blocks:null,nextBlockId:null}},_e=(d.convertGravityWarriorsSpikeToFunctions=function(e,t){d.readParams(e);return[_e(t.nextCodeFunctionId++),we(t.nextCodeFunctionId++,"ac0")]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.setSensor(true);\nthis.setAffectedByGravity(false);\nif (this.getYPosition() < this.scene.height / 2) {\n    this.setDirection(180);\n}",blocks:null,nextBlockId:null}}),we=function(e,t){return{id:e,type:"onCollisionWithActor",codeMode:"typed",params:{actorTypeId:t},disabled:!1,code:"this.game.restartScene();",blocks:null,nextBlockId:null}},Me=(d.convertGravityWarriorsPowerUpToFunctions=function(e,t){d.readParams(e);return[Me(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.setSensor(true);\nthis.setAffectedByGravity(false);\nif (this.getYPosition() < this.scene.height / 2) {\n    this.setDirection(180);\n}",blocks:null,nextBlockId:null}}),Ie=(d.convertGravityWarriorsDragonToFunctions=function(e,t){d.readParams(e);return[Ie(t.nextCodeFunctionId++),Ne(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.setSensor(true);\nthis.setDirection(-90);\nthis.setAffectedByGravity(false);\nthis.fire = function() {\n    var xPos = this.getXPosition();\n    if (game.heroXPos <= xPos - 100) {\n        var fire = this.scene.createActor('Fireball', this.getXPosition(), this.getYPosition());\n        fire.setSensor(true);\n        fire.setXSpeed(-150);\n        fire.setAffectedByGravity(false);\n    }\n};\nthis.fire();",blocks:null,nextBlockId:null}}),Ne=function(e){return{id:e,type:"onTimerRepeat",codeMode:"typed",params:{time:"5"},disabled:!1,code:"this.fire();",blocks:null,nextBlockId:null}},Pe=(d.convertGravityWarriorsPrincessToFunctions=function(e,t){d.readParams(e);return[Pe(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.setAffectedByGravity(false);\nthis.setSensor(true);\nthis.showSpeechBubble('There you are Little Hero! Help me get this Dragon!');",blocks:null,nextBlockId:null}}),Le=(d.convertWhiteboardPenToFunctions=function(e,t){e=d.readParams(e),e=e.scale.value||.1;return[Le(t.nextCodeFunctionId++,e),Ve(t.nextCodeFunctionId++,e)]},function(e,t){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:`this.setSensor(true);
this.setScale(${t}, ${t});`,blocks:null,nextBlockId:null}}),Ve=function(e){return{id:e,type:"onUpdate",codeMode:"typed",params:null,disabled:!1,code:"this.setXPosition(this.game.getMouseX());\nthis.setYPosition(this.game.getMouseY());\nthis.setScale(0.1, 0.1);\ntry {\n    this.playAnimation(this.game.colour);\n} catch (e) {\n    leap.log(e);\n}",blocks:null,nextBlockId:null}},Oe=(d.convertWhiteboardColourToFunctions=function(e,t){var e=d.readParams(e),o=e.xPos.value||50,n=e.yPos.value||50,e=e.scale.value||.5;return[Oe(t.nextCodeFunctionId++,o,n,e)]},function(e,t,o,n){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:`this.setXPosition(${t});
this.setYPosition(${o});
this.setScale(${n}, ${n})`,blocks:null,nextBlockId:null}}),Ge=(d.convertWhiteboardEraserToFunctions=function(e,t){var e=d.readParams(e),o=e.xPos.value||1550,n=e.yPos.value||50,e=e.scale.value||.75;return[Ge(t.nextCodeFunctionId++,o,n,e),Re(t.nextCodeFunctionId++)]},function(e,t,o,n){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:`this.setXPosition(${t});
this.setYPosition(${o});
this.setScale(${n}, ${n})`,blocks:null,nextBlockId:null}}),Re=function(e){return{id:e,type:"onMouseDown",codeMode:"typed",params:null,disabled:!1,code:"this.game.pen.clear();",blocks:null,nextBlockId:null}},He=(d.convertWhiteboardMirrorToFunctions=function(e,t){var e=d.readParams(e),o=e.xPos.value||1500,n=e.yPos.value||50,e=e.scale.value||.7;return[He(t.nextCodeFunctionId++,o,n,e),je(t.nextCodeFunctionId++)]},function(e,t,o,n){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:`this.setXPosition(${t});
this.setYPosition(${o});
this.setYPosition(${n}, ${n});
this.game.mirror = false;`,blocks:null,nextBlockId:null}}),je=function(e){return{id:e,type:"onMouseDown",codeMode:"typed",params:null,disabled:!1,code:"this.game.mirror = !this.game.mirror;\nthis.playAnimation(this.game.mirror, false);",blocks:null,nextBlockId:null}},We=(d.convertWhiteboardLevelToFunctions=function(e,t){return[We(t.nextCodeFunctionId++),Xe(t.nextCodeFunctionId++),Ye(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.game.pen = this.game._phaserGame.add.graphics(0, 0);\nthis.game._phaserGame.world.sendToBack(this.game.pen);\nthis.isMouseDownFlag = false;\nthis.start = {};\nthis.start.x = 0;\nthis.start.y = 0;\nthis.game.colour = 0xffce63;",blocks:null,nextBlockId:null}}),Xe=function(e){return{id:e,type:"onMouseDown",codeMode:"typed",params:null,disabled:!1,code:"this.isMouseDownFlag = true;\nthis.start.x = this.game.getMouseX();\nthis.start.y = this.game.getMouseY();\n",blocks:null,nextBlockId:null}},Ye=function(e){return{id:e,type:"onUpdate",codeMode:"typed",params:null,disabled:!1,code:"this.draw = function() {\n    if (this.isMouseDownFlag) {\n        this.game.pen.lineStyle(5, this.game.colour);\n    \n        var currentMouseX = this.game.getMouseX();\n        var currentMouseY = this.game.getMouseY();\n    \n        this.game.pen.moveTo(this.start.x, this.start.y);\n        this.game.pen.lineTo(currentMouseX, currentMouseY);\n    \n        if (this.game.mirror) {\n            var mirroredMouseX = this.width - currentMouseX;\n            var mirroredStartX = this.width - this.start.x;\n            \n            this.game.pen.moveTo(mirroredStartX, this.start.y);\n            this.game.pen.lineTo(mirroredMouseX, currentMouseY);\n        }\n    \n        this.start.x = this.game.getMouseX();\n        this.start.y = this.game.getMouseY();\n    } else {\n        this.isMouseDownFlag = false;\n    }\n};",blocks:null,nextBlockId:null}},De=(d.convertRobotRhythmMainLevelToFunctions=function(e,t){return[De(t.nextCodeFunctionId++),Ue(t.nextCodeFunctionId++),Ee(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.show = function() {\n    var m = 1;\n    for (var i = 0; i < this.game.numMoves; i++) {\n        var x = m * this.width / (this.game.numMoves + 1);\n        this.createActor('Symbol', x, 150);\n        this.lastCreatedActor.playAnimation(this.game.moves[m]);\n        m++;\n    } \n};\n\nthis.next = function() {\n    if (this.findActors('Symbol').length < 1) {\n        this.game.restartScene();\n    }\n    this.game.nextMove = this.findActors('Symbol')[0];\n};\n\nthis.reset = function() {\n    for (var i = this.findActors('Symbol').length - 1; i >= 0; i--) {\n        this.findActors('Symbol')[i].remove();\n    }\n    this.show();\n    this.next();\n};\n\nthis.checkMove = function() {\n    if (this.game.nextMove.getAnimation() == this.move) {\n        leap.log('correct');\n        this.game.nextMove.remove();\n        this.next();\n    } else {\n        leap.log(\"Wrong because:\");\n        leap.log(\"Animation was \" + this.game.nextMove.getAnimation());\n        leap.log(\"Animation was \" + this.move);\n        this.reset();\n    }\n};\n\nif (this.game.firstCreated !== false) {\n    this.game.firstCreated = false;\n    this.game.highScore = 0;\n    this.game.numMoves = 3;\n    this.game.timer = 3000;\n}\n\nthis.game.moves = [this.game.randomNumber(1, 4)];\nfor (var i = 0; i < this.game.numMoves; i++) {\n    this.game.moves.push(this.game.randomNumber(1, 4));\n}\nthis.game.numMoves++;\nthis.game.level = this.game.numMoves - 3;\nthis.up = 1;\nthis.right = 2;\nthis.down = 3;\nthis.left = 4;\nthis.show();\nthis.next();\nif (this.game.isTouchAvailable()) {\n    this.enableVirtualController('right', 'bottom');\n}",blocks:null,nextBlockId:null}}),Ue=function(e){return{id:e,type:"onTimerRepeat",codeMode:"typed",params:{time:"0.01"},disabled:!1,code:"this.game.timer--;\nif (this.game.timer < 1) {\n    this.game.goToNextScene();\n}",blocks:null,nextBlockId:null}},Ee=function(e){return{id:e,type:"onUpdate",codeMode:"typed",params:null,disabled:!1,code:"if (this.game.level > this.game.highScore) {\n    this.game.highScore = this.game.level;\n}\n\nvar time = Number(this.game.timer);\nvar seconds = Math.floor(time / 100);\nvar microseconds = Math.floor(time % 100);\nvar timerText = seconds.toString().padStart(2, '0') + '.' + microseconds.toString().padStart(2, '0');\n\nthis.showLabel(\"score\", this.width / 2 - 70, this.height / 2 - 150, \"Level \" + (this.game.numMoves - 3));\nthis.setLabelFont(\"score\", 'bold', 40, 'Lucida Sans Unicode');\nthis.setLabelFontColor(\"score\", '#7dddff', '#000000', 3);\nthis.showLabel(\"timer\", this.width / 2 - 120, this.height / 2 - 50, timerText);\nthis.setLabelFont(\"timer\", 'bold', 80, 'Lucida Sans Unicode');\nthis.setLabelFontColor(\"timer\", '#a1ff7d', '#000000', 5);",blocks:null,nextBlockId:null}},Je=(d.convertRobotRhythmRestartLevelToFunctions=function(e,t){return[Je(t.nextCodeFunctionId++),ze(t.nextCodeFunctionId++)]},function(e){return{id:e,name:"Labels",type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.showLabel(\"score\", 50, this.height / 2 - 60, \"You reached level \" + this.game.level);\nthis.setLabelFont(\"score\", 'bold', 40, 'Lucida Sans Unicode');\nthis.setLabelFontColor(\"score\", '#ffaf8f', '#000000', 3);\nthis.showLabel(\"highScore\", 50, this.height / 2 + 50, \"Highest level reached: \" + this.game.highScore);\nthis.setLabelFont(\"highScore\", 'bold', 40, 'Lucida Sans Unicode');\nthis.setLabelFontColor(\"highScore\", '#a1ff7d', '#000000', 3);",blocks:null,nextBlockId:null}}),ze=function(e){return{id:e,type:"onMouseDown",codeMode:"typed",params:null,disabled:!1,code:"this.game.numMoves = 3;\nthis.game.timer = 3000;\nthis.game.goToNextScene();",blocks:null,nextBlockId:null}},$e=(d.convertRobotRhythmSymbolToFunctions=function(e,t){return[$e(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.setSensor(true);",blocks:null,nextBlockId:null}}),Ke=(d.convertRobotRhythmDancerToFunctions=function(e,t){return[Ke(t.nextCodeFunctionId++),qe(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.playAnimation(this.game.randomNumber(1, 4), true);",blocks:null,nextBlockId:null}}),qe=function(e){return{id:e,type:"onTimerRepeat",codeMode:"typed",params:{time:"3"},disabled:!1,code:"this.playAnimation(this.game.randomNumber(1, 4), true);",blocks:null,nextBlockId:null}},Qe=(d.convertOrbitJumperGravityToFunctions=function(e,t){return[Qe(t.nextCodeFunctionId++),Ze(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.setSensor(true);\nthis.setAffectedByGravity(false);\nthis.setScale(0.5, 0.5);\nthis.game.gravity = 0;\nthis.game.reversed = false;",blocks:null,nextBlockId:null}}),Ze=function(e){return{id:e,type:"onUpdate",codeMode:"typed",params:null,disabled:!1,code:"this.setYPosition(32);\nthis.scene.showLabel('gravityLabel', this.scene.width / 2 - 150, this.scene.height - 100, 'GRAVITY: ' + this.game.gravity);\nthis.scene.setLabelFont('gravityLabel', 'bold', 50, 'Lucida Sans Unicode');\nthis.scene.setLabelFontColor('gravityLabel', '#c1ffb3', '#000', 3);\n\nif (!this.game.isMouseDown()) return;\nif (this.game.getMouseY() > 100) return;\n\nvar mouseX = this.game.getMouseX();\nmouseX = Math.max(100, mouseX);\nmouseX = Math.min(this.scene.width - 100, mouseX);\n\nthis.setXPosition(mouseX);\nthis.game.gravity = -2 * (this.scene.width / 2 - mouseX);",blocks:null,nextBlockId:null}},et=(d.convertOrbitJumperSliderToFunctions=function(e,t){return[et(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.setScale(45, 0.5);\nthis.setAffectedByGravity(false);\nthis.setSensor(true);\nthis.setXPosition(this.scene.width / 2);\nthis.setYPosition(32);",blocks:null,nextBlockId:null}}),tt=(d.convertOrbitJumperPlayerToFunctions=function(e,t){return[tt(t.nextCodeFunctionId++),ot(t.nextCodeFunctionId++),nt(t.nextCodeFunctionId++,"ac3"),it(t.nextCodeFunctionId++),rt(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.setKeepInWorld(true);\nthis.setCanRotate(false);\nthis.scene.createActor('Slider', 0, 0);\nthis.scene.createActor('Gravity', this.scene.width / 2, 0);\nif (this.game.isTouchAvailable()) {\n    this.scene.enableVirtualController('right', 'bottom');\n}\nthis.time = 0;",blocks:null,nextBlockId:null}}),ot=function(e){return{id:2,type:"onUpdate",codeMode:"typed",params:null,disabled:!1,code:"if (this.game.isKeyPressed('right')) {\n    this.setXSpeed(200);\n    this.playAnimation(this.game.reversed ? 'Left' : 'Right');\n} else if (this.game.isKeyPressed('left')) {\n    this.setXSpeed(-200);\n    this.playAnimation(this.game.reversed ? 'Right' : 'Left');\n} else {\n    this.setXSpeed(0);\n}\n\nthis.setDirection(this.game.reversed ? 180 : 0);\n\nthis.scene.showLabel('time', 20, this.scene.height - 40, this.time + ' seconds');\nthis.scene.setLabelFont('time', 'bold', 35, 'Lucida Sans Unicode');\nthis.scene.setLabelFontColor('time', '#6bdeff', '#636363', 3);",blocks:null,nextBlockId:null}},nt=function(e,t){return{id:e,type:"onCollisionWithActor",codeMode:"typed",params:{actorTypeId:t},disabled:!1,code:"this.collidedWith.remove();\nif (this.scene.findActors('Star').length < 1) {\n    this.game.goToNextScene();\n}",blocks:null,nextBlockId:null}},it=function(e){return{id:e,type:"onTimerRepeat",codeMode:"typed",params:{time:"1"},disabled:!1,code:"this.time += 1;",blocks:null,nextBlockId:null}},rt=function(e){return{id:e,type:"onKeyDown",codeMode:"typed",params:{key:"up"},disabled:!1,code:"if (this.isBlockedDown()) {\r\n    this.setYSpeed(this.game.reversed ? 500 : -500);\r\n}",blocks:null,nextBlockId:null}},st=(d.convertRlglTrafficLightToFunctions=function(e,t){var e=d.readParams(e),o=e.time.value||null,n=e.time.expression||null,i=e.reaction.value||null,e=e.reaction.expression||null;return[st(t.nextCodeFunctionId++),at(t.nextCodeFunctionId++),lt(t.nextCodeFunctionId++,o,n,i,e)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.scene.createLabelWithName('light', 50, 25, 'Ready?');this.setSensor(true);this.setAffectedByGravity(false);this.reaction = 0.3;this.time = this.game.randomNumber(1, 4);this.greenLight();",blocks:null,nextBlockId:null}}),at=function(e){return{id:e,type:"onUpdate",codeMode:"typed",params:null,disabled:!1,code:"this.setXPosition(this.game.player);this.setYPosition(this.scene.height - 40);",blocks:null,nextBlockId:null}},lt=function(e,t,o,n,i){return{id:e,type:"onUpdate",codeMode:"block",params:null,disabled:!1,code:null,blocks:[{type:"setOwnerVar",variable:{name:"time",defaultValue:"0"},logicBlock:!1,group:"variables",expression:o,value:t},{type:"setOwnerVar",variable:{name:"reaction",defaultValue:null},logicBlock:!1,group:"variables",expression:i,value:n}],nextBlockId:null}},ct=(d.convertRlglPlayerToFunctions=function(e,t){return[ct(t.nextCodeFunctionId++),dt(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.makeCameraFollow();this.game.out = false;",blocks:null,nextBlockId:null}}),dt=function(e){return{id:e,type:"onUpdate",codeMode:"typed",params:null,disabled:!1,code:"this.game.player = this.getXPosition(); if (this.game.player >= this.game.finishLine) {this.game.goToNextScene();} if (this.getXSpeed() !== 0 || this.getYSpeed() !== 0) {this.game.out = true;} else {this.game.out = false;} if (this.getYPosition() > this.scene.height) {this.game.restartScene();} else if (this.game.player < 0) {this.game.restartScene();}",blocks:null,nextBlockId:null}},ut=(d.convertRlglFinishToFunctions=function(e,t){return[ut(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.setSensor(true);this.setAffectedByGravity(false);this.game.finishLine = this.getXPosition();",blocks:null,nextBlockId:null}}),ht=(d.convertCarrotClickerLevelToFunctions=function(e,t){return[ht(t.nextCodeFunctionId++),mt(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.game.graphics = this.game._phaserGame.add.graphics(0, 0);\nthis.game.parseNum = function (num) {\n    if (num < 1000) return num.toString();\n\n    var suffixes = ['k', 'm', 'b', 't', 'q', 'Q', 's', 'S', 'o', 'n', 'd', 'u', 'D', 'T', 'qd', 'Qd', 'sd', 'Sd', 'Od', 'Nd', 'v', 'uv', 'dv', 'tv', 'qv', 'Qv', 'sv', 'Sv', 'ov', 'nv'];\n    var i = -1;\n    while (num >= 1000 && i < suffixes.length - 1) {\n        num /= 1000;\n        i++;\n    }\n\n    return num.toFixed(2) + suffixes[i];\n};",blocks:null,nextBlockId:null}}),mt=function(e){return{id:e,type:"onUpdate",codeMode:"typed",params:null,disabled:!1,code:"var ratio = this.game.hp / this.game.maxHp;\r\nvar greenLineWidth = ratio * (this.width - 50);\r\n\r\nvar radius = 13;\r\nif (ratio < 0.1) {\r\n    radius = Math.round(radius * ratio);\r\n}\r\n\r\nvar halfPoint = 0.5;\r\nvar r, g;\r\nif (ratio <= halfPoint) {\r\n    r = Math.round(153 + (255 - 153) * (ratio / halfPoint));\r\n    g = 255;\r\n} else {\r\n    r = 255;\r\n    g = Math.round(255 - (255 - 153) * ((ratio - halfPoint) / halfPoint));\r\n}\r\n\r\nvar c = (g << 16) | (r << 8) | 153;\r\n\r\nthis.game.graphics.clear();\r\n\r\nthis.game.graphics.beginFill(0xFFFFFF);\r\nthis.game.graphics.drawRect(20, 30, this.width - 40, 35);\r\nthis.game.graphics.endFill();\r\n\r\nif (this.game.hp > 0) {\r\n    this.game.graphics.beginFill(c);\r\n    this.game.graphics.drawRect(25, 35, greenLineWidth, 25);\r\n    this.game.graphics.endFill();\r\n}",blocks:null,nextBlockId:null}},pt=(d.convertCarrotClickerCarrotToFunctions=function(e,t){return[pt(t.nextCodeFunctionId++),gt(t.nextCodeFunctionId++),ft(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.setKeepInWorld(true);\nthis.setAffectedByGravity(false);\nthis.setSensor(true);\nthis.setXPosition(this.scene.width * 0.75);\nthis.setYPosition(this.scene.height / 2);\nthis.setScale(2.5, 2.5);\nthis.scene.setSceneGravity(0, 800); \nthis.game.maxHp = 10; \nthis.game.hp = this.game.maxHp; \nthis.game.upgrade = 1; \nthis.game.level = 1; \nthis.animation = 1;",blocks:null,nextBlockId:null}}),gt=function(e){return{id:e,type:"onUpdate",codeMode:"typed",params:null,disabled:!1,code:"if (this.game.hp <= 0) {\n    this.game.maxHp = this.game.hp = Math.round(this.game.maxHp * 1.7);\n    this.game.money += this.game.maxHp;\n    this.game.level = Number(this.game.level) + 1; \n    if (this.game.level > 1 && this.game.level % 10 == 1) { \n        this.animation = Number(this.animation) + 1; \n    } \n    if (this.animation % 13 === 0) {\n        this.animation = 1; \n    } \n}\nthis.game.money = Math.round(this.game.money);\nthis.scene.showLabel('money', 10, 175, 'Money: $' + this.game.parseNum(this.game.money));\nthis.scene.setLabelFont('money', 'bold', 24, 'Lucida Sans Unicode'); \nthis.scene.showLabel(\"heading\", 40, 125, \"Upgrades\"); \nthis.scene.setLabelFont(\"heading\", 'bold', 30, 'Lucida Sans Unicode'); \nthis.scene.setLabelFontColor(\"heading\", '#ff8d8d', '#ffffff', 3);\nthis.playAnimation(this.animation, true);",blocks:null,nextBlockId:null}},ft=function(e){return{id:e,type:"onMouseDown",codeMode:"typed",params:null,disabled:!1,code:"this.createActor('Coin', this.getXPosition(), this.getYPosition()); \nthis.game.money = Math.round(this.game.money + this.game.upgrade); \nthis.game.hp = this.game.hp - this.game.upgrade; \nthis.setScale(2.5, 2.5); \nthis.startTimer(0.1, false, function() { this.setScale(3, 3); });",blocks:null,nextBlockId:null}},bt=(d.convertCarrotClickerCoinToFunctions=function(e,t){return[bt(t.nextCodeFunctionId++),yt(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.setAffectedByGravity(true);\nthis.setSensor(true);\nthis.setDirection(this.game.randomNumber(1, 359));\nthis.setSpeed(this.game.randomNumber(101, 999));\nthis.setSpinSpeed(this.game.randomNumber(-1, 1) * 2000);\nif (this.game.randomNumber(1, 99) < 99) {\n    this.playAnimation(this.game.randomNumber(1, 2), true);\n} else {\n    this.playAnimation(3, true); \n}",blocks:null,nextBlockId:null}}),yt=function(e){return{id:e,type:"onTimerOnce",codeMode:"typed",params:{time:"0.5"},disabled:!1,code:"if (this.getAnimation() < 3) {\n    this.remove();\n} else {\n    this.createActor('Jackpot', this.getXPosition(), this.getYPosition());\n    this.remove();\n}",blocks:null,nextBlockId:null}},vt=(d.convertCarrotClickerPowerToFunctions=function(e,t){e=d.readParams(e);return[vt(t.nextCodeFunctionId++),kt(t.nextCodeFunctionId++),d.setOwnerVarJson(t.nextCodeFunctionId++,"cost",e.cost),d.setOwnerVarJson(t.nextCodeFunctionId++,"message",e.message)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:'this.setAffectedByGravity(false); \nthis.y = this.getYPosition();\nthis.scene.createLabelWithName("upgradeCost", 10, this.y, \'\');\nthis.warning = 0;\nthis.upgradeCount = 1;\nthis.canBuy = false;\n\nthis.failPurchase = function (obj) {\n    obj.scene.showLabel("".concat("warningP", obj.warning), 250, this.y - 16, obj.message);\n    obj.scene.setLabelFont("".concat("warningP", obj.warning), \'bold\', 15, \'Lucida Sans Unicode\');\n    obj.warning = obj.warning + 1;\n    obj.startTimer(2, false, function() {\n        for (var i = 0; i < obj.warning; i++) {\n            try { obj.scene.removeLabel(\'warningP\' + i); } catch (e) { continue; }\n        }\n    });\n};',blocks:null,nextBlockId:null}}),kt=function(e){return{id:e,type:"onUpdate",codeMode:"typed",params:null,disabled:!1,code:"this.scene.setLabelText('upgradeCost', 'Cost: $' + this.game.parseNum(Math.round(this.cost)));\nthis.scene.showLabel(\"upgrade\", 10, this.y - 25, \"Clicker Power - Lv\" + this.upgradeCount);\nthis.scene.setLabelFont(\"upgrade\", 'bold', 15, 'Lucida Sans Unicode');\nthis.scene.setLabelFont(\"upgradeCost\", 'bold', 15, 'Lucida Sans Unicode');\nthis.canBuy = this.game.money >= Number(this.cost);",blocks:null,nextBlockId:null}},xt=(d.convertCarrotClickerAutoClickToFunctions=function(e,t){e=d.readParams(e);return[xt(t.nextCodeFunctionId++),Ct(t.nextCodeFunctionId++),d.setOwnerVarJson(t.nextCodeFunctionId++,"cost",e.cost),d.setOwnerVarJson(t.nextCodeFunctionId++,"message",e.message)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:'this.setAffectedByGravity(false);\r\nthis.y = this.getYPosition();\r\nthis.scene.createLabelWithName("autoUpgradeCost", 10, this.y, \'\');\r\nthis.game.numAuto = 0;\r\nthis.warning = 0;\r\nthis.cost = 100;\r\nthis.canBuy = false;\r\nthis.message = "You can\'t buy this yet!";\r\n\r\nthis.failPurchase = function (obj) {\r\n    this.scene.showLabel("".concat("warningAC", this.warning), 250, this.y - 16, obj.message);\r\n    this.scene.setLabelFont("".concat("warningAC", this.warning), \'bold\', 15, \'Lucida Sans Unicode\');\r\n    this.warning = this.warning + 1;\r\n    this.startTimer(2, false, function() {\r\n        for (var i = 0; i < this.warning; i++) {\r\n            try {\r\n                this.scene.removeLabel(\'warningAC\' + i);\r\n            } catch (e) {\r\n                continue;\r\n            }\r\n        }\r\n    });\r\n};',blocks:null,nextBlockId:null}}),Ct=function(e){return{id:e,type:"onUpdate",codeMode:"typed",params:null,disabled:!1,code:"this.canBuy = this.game.money >= Number(this.cost);\nthis.scene.setLabelText('autoUpgradeCost', 'Cost: $' + this.game.parseNum(Math.round(this.cost)));\n\nthis.scene.showLabel(\"autoUpgrade\", 10, this.y - 25, \"\".concat(this.game.numAuto, \" Auto Clickers\"));\nthis.scene.setLabelFont(\"autoUpgrade\", 'bold', 15, 'Lucida Sans Unicode');\nthis.scene.setLabelFont(\"autoUpgradeCost\", 'bold', 15, 'Lucida Sans Unicode');",blocks:null,nextBlockId:null}},Ft=(d.convertCarrotClickerAutoSpeedToFunctions=function(e,t){e=d.readParams(e);return[Ft(t.nextCodeFunctionId++),St(t.nextCodeFunctionId++),d.setOwnerVarJson(t.nextCodeFunctionId++,"cost",e.cost),d.setOwnerVarJson(t.nextCodeFunctionId++,"message",e.message)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:'this.setAffectedByGravity(false);\r\nthis.y = this.getYPosition();\r\nthis.game.clickTimer = 1;\r\nthis.scene.createLabelWithName("speedUpgradeCost", 10, this.y, \'\');\r\nthis.warning = 0;\r\nthis.upgradeCount = 0;\r\nthis.notEnough = true;\r\nthis.noAutoClickers = true;\r\n\r\nthis.failPurchase = function (obj) {\r\n    obj.scene.showLabel("".concat("warningAS", obj.warning), 250, obj.y - 16, obj.message);\r\n    obj.scene.setLabelFont("".concat("warningAS", obj.warning), \'bold\', 15, \'Lucida Sans Unicode\');\r\n    obj.warning = obj.warning + 1;\r\n    obj.startTimer(2, false, function() {\r\n        for (var i = 0; i < obj.warning; i++) {\r\n            try {\r\n                obj.scene.removeLabel(\'warningAS\' + i);\r\n            } catch (e) {\r\n                continue;\r\n            }\r\n        }\r\n    });\r\n};',blocks:null,nextBlockId:null}}),St=function(e){return{id:e,type:"onUpdate",codeMode:"typed",params:null,disabled:!1,code:"this.scene.setLabelText('speedUpgradeCost', 'Cost: $' + this.game.parseNum(Math.round(this.cost)));\nthis.scene.showLabel(\"speedUpgrade\", 10, this.y - 25, \"\".concat(\"Auto Speed - Lv\", this.upgradeCount));\nthis.scene.setLabelFont(\"speedUpgrade\", 'bold', 15, 'Lucida Sans Unicode');\nthis.scene.setLabelFont(\"speedUpgradeCost\", 'bold', 15, 'Lucida Sans Unicode');\nthis.notEnough = this.game.money < Number(this.cost);\nthis.noAutoClickers = this.game.numAuto < 1;",blocks:null,nextBlockId:null}},O=(d.convertCarrotClickerJackpotToFunctions=function(e,t){d.readParams(e);return[O(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.setSensor(true);\r\nthis.setAffectedByGravity(false);\r\nthis.playAnimation(\"open\", false);\r\n\r\nvar delta = 0.2;\r\nvar num = 10;\r\nfor (var i = 0; i < num; i++) {\r\n    this.startTimer(i * delta, false, function() {\r\n        this.game.money = this.game.money + this.game.maxHp;\r\n        this.createActor('Coin', this.getXPosition(), this.getYPosition());\r\n    });\r\n}\r\nthis.startTimer(num * delta, false, function() {\r\n    this.remove();\r\n});",blocks:null,nextBlockId:null}}),O=(d.convertCarrotClickerJackpotToFunctions=function(e,t){d.readParams(e);return[O(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.setSensor(true);\r\nthis.setAffectedByGravity(false);\r\nthis.playAnimation(\"open\", false);\r\n\r\nvar delta = 0.2;\r\nvar num = 10;\r\nfor (var i = 0; i < num; i++) {\r\n    this.startTimer(i * delta, false, function() {\r\n        this.game.money = this.game.money + this.game.maxHp;\r\n        this.createActor('Coin', this.getXPosition(), this.getYPosition());\r\n    });\r\n}\r\nthis.startTimer(num * delta, false, function() {\r\n    this.remove();\r\n});",blocks:null,nextBlockId:null}}),At=(d.convertSimonButtonToFunctions=function(e,t){e=d.readParams(e);return[d.setOwnerVarJson(t.nextCodeFunctionId++,"default",e.default),At(t.nextCodeFunctionId++),Tt(t.nextCodeFunctionId++,e.colour.value),Bt(t.nextCodeFunctionId++),_t(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.size = Number(this.default);",blocks:null,nextBlockId:null}}),Tt=function(e,t){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:`this.game.${t} = this;`,blocks:null,nextBlockId:null}},Bt=function(e){return{id:e,type:"onUpdate",codeMode:"typed",params:null,disabled:!1,code:"this.setSensor(true);\r\nthis.setScale(Number(this.size), Number(this.size));\r\n",blocks:null,nextBlockId:null}},_t=function(e){return{id:e,type:"onMouseDown",codeMode:"typed",params:null,disabled:!1,code:"if (!this.game.recording)\r\n{\r\n    this.play();\r\n    this.game.check(this);\r\n}",blocks:null,nextBlockId:null}},wt=(d.convertSimonLevelToFunctions=function(e,t){d.readParams(e);return[wt(t.nextCodeFunctionId++),Mt(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.game.play = function (obj, moves) {\n    for (var i = 0; i < moves.length; i++) {\n        obj.game.playColour[moves[i]](obj, 1 + i);\n    }\n    obj.startTimer(1 + moves.length, false, function () { obj.game.recording = false; });\n};\n\nthis.game.playColour = {\n    red: function(obj, delay) { obj.startTimer(delay, false, function() { obj.game.red.play(); } ); },\n    green: function(obj, delay) { obj.startTimer(delay, false, function() { obj.game.green.play(); } ); },\n    orange: function(obj, delay) { obj.startTimer(delay, false, function() { obj.game.orange.play(); } ); },\n    blue: function(obj, delay) { obj.startTimer(delay, false, function() { obj.game.blue.play(); } ); },\n};\n\nthis.game.check = function(obj) {\n    if (obj.getAnimation() == obj.game.moves[0]) {\n        obj.game.moves = obj.game.moves.splice(1, obj.game.moves.length);\n    } else {\n        obj.game.restartScene();\n    }\n\n    if (obj.game.moves.length < 1) {\n        obj.game.record(obj);\n    }\n};\n\nthis.game.record = function (obj) {\n    obj.game.recording = true;\n    var colours = ['red', 'green', 'orange', 'blue'];\n    var colour = obj.game.randomChoice(colours);\n    obj.game.movesList.push(colour);\n    obj.game.level++;\n    obj.game.moves = obj.game.movesList.slice();\n    obj.game.play(obj, obj.game.movesList);\n};\n\nthis.game.level = 0;\nthis.game.recording = true;\nthis.game.movesList = [];\nthis.game.record(this);\n\nif (this.game.initialised !== true) {\n    this.game.initialised = true;\n    this.game.highScore = 0;\n}",blocks:null,nextBlockId:null}}),Mt=function(e){return{id:e,type:"onUpdate",codeMode:"typed",params:null,disabled:!1,code:"this.showLabel(\"level\", (this.width / 2) - 80, (this.height / 2) - 80, this.game.level);\r\nthis.setLabelFont(\"level\", 'bold', 128, 'Lucida Sans Unicode');\r\nif (this.game.recording) this.setLabelFontColor(\"level\", '#ffa6c2', '#ffffff', 3);\r\nelse this.setLabelFontColor(\"level\", '#a6ffc1', '#ffffff', 3);\r\n\r\nif (this.game.level > this.game.highScore) this.game.highScore = this.game.level;\r\nthis.showLabel(\"highScore\", 32, this.height - 50, \"\".concat(\"High Score: \", this.game.highScore));\r\nthis.setLabelFont(\"highScore\", 'bold', 35, 'Lucida Sans Unicode');\r\nthis.setLabelFontColor(\"highScore\", '#99d0ff', '#ffffff', 3);",blocks:null,nextBlockId:null}},It=(d.convertMazePlayerToFunctions=function(e,t){d.readParams(e);return[It(t.nextCodeFunctionId++),Nt(t.nextCodeFunctionId++),Pt(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.makeCameraFollow();\r\nthis.game.tile = 32;\r\nthis.game.steps = 4;\r\nthis.game.startX = this.game.tile * 2.5;\r\nthis.game.startY = this.scene.height - (this.game.tile * 2.5);\r\nthis.setXPosition(this.game.startX);\r\nthis.setYPosition(this.game.startY);\r\nthis.game.moves = [];\r\n\r\nthis.game.move = function(obj, dir) {\r\n    obj.game.moves.push(dir);\r\n    obj.startTimer(obj.game.moves.length, false, dir);\r\n};\r\n\r\nthis.right = function() {\r\n    for (var i = 1; i <= this.game.steps; i++) {\r\n        this.startTimer(i * 0.1, false, function() {\r\n            this.setXPosition(this.getXPosition() + this.game.tile);\r\n        });\r\n    }\r\n    this.setDirection(90);\r\n};\r\n\r\nthis.left = function() {\r\n    for (var i = 1; i <= this.game.steps; i++) {\r\n        this.startTimer(i * 0.1, false, function() {\r\n            this.setXPosition(this.getXPosition() - this.game.tile);\r\n        });\r\n    }\r\n    this.setDirection(-90);\r\n};\r\n\r\nthis.up = function() {\r\n    for (var i = 1; i <= this.game.steps; i++) {\r\n        this.startTimer(i * 0.1, false, function() {\r\n            this.setYPosition(this.getYPosition() - this.game.tile);\r\n        });\r\n    }\r\n    this.setDirection(0);\r\n};\r\n\r\nthis.down = function() {\r\n    for (var i = 1; i <= this.game.steps; i++) {\r\n        this.startTimer(i * 0.1, false, function() {\r\n            this.setYPosition(this.getYPosition() + this.game.tile);\r\n        });\r\n    }\r\n    this.setDirection(180);\r\n};",blocks:null,nextBlockId:null}}),Nt=function(e){return{id:e,type:"onCollisionWithTile",codeMode:"typed",params:null,disabled:!1,code:"this.game.restartScene();",blocks:null,nextBlockId:null}},Pt=function(e){return{id:e,type:"onUpdate",codeMode:"typed",params:null,disabled:!1,code:"if (this.getYPosition() < 0) { this.game.goToNextScene(); }\r\nif (this.getXPosition() < 0) { this.game.goToNextScene(); }\r\nif (this.getYPosition() > this.scene.height) { this.game.goToNextScene(); }\r\nif (this.getXPosition() > this.scene.width) { this.game.goToNextScene(); }\r\n\r\n",blocks:null,nextBlockId:null}},Lt=(d.convertMazeLevelToFunctions=function(e,t){d.readParams(e);return[Lt(t.nextCodeFunctionId++)]},function(e){return{id:e,type:"onCreate",codeMode:"typed",params:null,disabled:!1,code:"this.game.player = this.createActor('Player', 0, 0);\n",blocks:null,nextBlockId:null}})},CodeCampWorldGame=function(n,i,e){function r(){e&&e(),x._presenter.sendMessage({type:"initial",payload:!0})}var x=this;this.def=n,this.TILE_GROUP_CATEGORY=1,this.ACTOR_GROUP_CATEGORY=2,this.scenes=[],this.scenesByName={},this.actorTypes=[],this.actorTypesById={},this.tileSets={},this.spriteSheets={},this.backgrounds={},this.images={},this.currentScene=null,this.keys={},this.startingSceneId=null,this._simulateTouchOnly=!1,this._maximumLoopCount=200,this._infiniteRestartSceneThresholdInMs=1e3,this._infiniteRestartSceneCurrentCount=0,this._infiniteRestartSceneMaximumAttempts=15,this._maxInitialActorScale=5,this._minInitialActorScale=.25,this._container=null,x._nextActorUid=1;return this.start=function(e,t){var o;null==document.getElementById("injected")&&((o=document.createElement("style")).setAttribute("id","injected"),document.head.appendChild(o),o=o.sheet)&&o.insertRule&&o.insertRule("#"+e+" canvas { min-width: 1px; min-height: 1px; }",0),leap.log("Loading game: "+n.name),document.title=n.name,x.startingSceneId=t,x._container=document.getElementById(e),x._container.parentNode;codeblocks.addCustomVariables(x),x._presenter=new Presentation(x),x.codeModuleReader=new CodeModuleReader(x),x._phaserGame=new Phaser.Game(640,480,Phaser.AUTO,e),x._phaserGame.enableDebug=!1,x._phaserGame.state.add("boot",new LeapBootState(x,e)),x._phaserGame.state.add("load",new LeapLoadState(x,i,r)),x._phaserGame.state.start("boot"),x.resizeListener=function(){x._sizeToFit()},window.addEventListener("resize",x.resizeListener)},this.destroy=function(){window.removeEventListener("resize",x.resizeListener),x._phaserGame.destroy()},this._getCollisionCategoryForActorTypeId=function(e){for(var t=0;t<x.actorTypes.length;t++)if(x.actorTypes[t].id===e)return t+1},this._getActorTypeById=function(e){var t=e?x.actorTypesById[e]:null;if(t)return t;throw"Actor with ID "+e+"does not exist"},this.setFillWindow=function(e){x.fillWindow=e,this._sizeToFit()},this._sizeToFit=function(){if(x._container){var e,t,o=x._container.parentNode,n=o.clientWidth,o=o.clientHeight,i=n,r=o,s=(x.fillWindow||(s=x.viewPortWidth||640,a=x.viewPortHeight||480,x.viewPortFixed?(i=s,r=a):(s<n&&(i=s),a<o&&(r=a),s<n&&a<o&&(i=s*(n=Math.min(n/s,o/a)),r=a*n))),x.def.scaleMode),o=(null==(s=s&&s.useAlways||null==x.currentScene||null==game.currentScene.def.scaleMode?s:game.currentScene.def.scaleMode)&&(s={type:"grow",minWidth:0,minHeight:0}),1),a=1;if(x.currentScene){var l,c,d,u,h,m,p,g,f,b,y,n=x.currentScene.def.cellsAcross*x.currentScene.def.cellWidth,v=x.currentScene.def.cellsDown*x.currentScene.def.cellHeight;if("fit"==s.type?(l=i/n,c=r/v,d=Math.min(l,c),a=o=d=null!=(u=s.maxScale)?Math.min(u,d):d):"grow"==s.type?s.minWidth&&s.minHeight&&(s.minWidth>i||s.minHeight>r)&&(l=i/s.minWidth,c=r/s.minHeight,o=d=Math.min(l,c),a=d):"stretch"==s.type&&s.minWidth&&s.minHeight&&(o=i/s.minWidth,a=r/s.minHeight,null!=(u=s.maxScale)&&(u<o&&(i=(o=u)*s.minWidth),u<a)&&(r=(a=u)*s.minHeight),"preserve"!=s.aspectRatio&&"preserveExpand"!=s.aspectRatio||(a<o?(o=a,"preserve"==s.aspectRatio&&(i=s.minWidth*o)):(a=o,"preserve"==s.aspectRatio&&(r=s.minHeight*a)))),e=(i=Math.min(i,n*o))/o,t=(r=Math.min(r,v*a))/a,x.currentScene.layers)for(var k=0;k<x.currentScene.layers.length;k++)x.currentScene.layers[k].resize(e,t);x.currentScene._background&&(x.currentScene._background.width=e,x.currentScene._background.height=t,l=x.currentScene.def.background.movementScale,c=x.currentScene.def.background.tileVertically,d=x.currentScene.def.background.tileHorizontally,m=h=s=u=0,null==l&&(l=.5),c&&d?(b=f=1,m=h=l):(f=e/(p=(g=x.backgrounds[x.currentScene.def.background.backgroundId]).width),b=t/(g=g.height),(f*=y=e<n&&!d&&t<v&&!c?f<b?1+l*(v-t)/t:1+l*(n-e)/e:e<n&&!d?1+l*(n-e)/e:t<v&&!c?1+l*(v-t)/t:1)<(b*=y)||d?(h=d?l/b:e<n?e*(y-1)/((n-e)*b)+p*(1-f/b)/(n-e):(u=-p*(1-f/b)/2,0),m=t<v?t*(y-1)/((v-t)*b):0,f=b):(b<f||c)&&(m=c?l/f:t<v?t*(y-1)/((v-t)*f)+g*(1-b/f)/(v-t):(s=-g*(1-b/f)/2,0),h=e<n?e*(y-1)/((n-e)*f):0,b=f)),h=1/f<h?-1/f:-h,m=1/b<m?-1/b:-m,x.currentScene._background.tileScale=new Phaser.Point(f,b),x.currentScene._backgroundOffsetX=u,x.currentScene._backgroundOffsetY=s,x.currentScene._backgroundCameraScaleX=h,x.currentScene._backgroundCameraScaleY=m)}else e=i,t=r;x._phaserGame.scale&&(x._phaserGame.scale.setGameSize(e,t),x._phaserGame.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,x._phaserGame.scale.setUserScale(o,a),x._phaserGame.scale.refresh()),x.currentScene&&x.currentScene._virtualController&&x.currentScene._virtualController.isActive()&&x.currentScene._virtualController._update()}},this.goToNextScene=function(){leap.log("Going to next scene");for(var e=0;e<x.scenes.length;e++)if(x.currentScene==x.scenes[e])return e>=x.scenes.length-1?void x.goToScene(x.scenes[0]):void x.goToScene(x.scenes[e+1])},this.restartScene=function(){this.onSceneTransition(),x._phaserGame.state.restart()},this.onSceneTransition=function(){var e=new Date;if(this._lastValidSceneTransition)if(e.getTime()-this._lastValidSceneTransition.getTime()<=this._infiniteRestartSceneThresholdInMs){if(this._infiniteRestartSceneCurrentCount++,this._infiniteRestartSceneCurrentCount>this._infiniteRestartSceneMaximumAttempts)throw"This scene change is firing too often. This may be a result of your game freezing. Check that the following code block is not being called repeatedly by mistake!"}else this._lastValidSceneTransition=e,this._infiniteRestartSceneCurrentCount=0;else this._lastValidSceneTransition=e},this.getSceneByName=function(e){var t=x.scenesByName[e];if(null==t&&null!=e)for(var o in x.scenesByName)if(o.trim().toLowerCase()===e.trim().toLowerCase()){leap.log('Mismatched case in requested scene name. You asked for "'+e+'", but the scene I found is called "'+o+'".'),t=x.scenesByName[o];break}return t},this.getSceneById=function(e){for(var t=0;t<x.scenes.length;t++)if(x.scenes[t].id==e)return x.scenes[t];return null},this.goToSceneWithId=function(e){var t=x.getSceneById(e);if(!t)throw new Error("no scene with id "+e);x.goToScene(t)},this.goToSceneWithName=function(e){var t=x.getSceneByName(e);if(!t)throw new Error("no scene with name "+e);x.goToScene(t)},this.goToScene=function(e){this.onSceneTransition(),leap.log("Going to scene: "+e.name),this.currentScene=e,this._sizeToFit(),x._phaserGame.state.start(e.id)},this.randomNumber=function(e,t){return checkNAN(e,"Minimum"),void 0===t?Math.floor(Math.random()*e):(checkNAN(t,"Maximum"),Math.floor(Math.random()*(t-e+1))+e)},this.randomChoice=function(e){return e[Math.floor(Math.random()*e.length)]},this._createLabel=function(e,t,o,n){checkNAN(e,"Label X Position"),checkNAN(t,"Label Y Position");e=x._phaserGame.add.text(e,t,o,n);return e.fixedToCamera=!0,e},this.screenWidth=function(){return x._phaserGame.scale._gameSize.width},this.screenHeight=function(){return x._phaserGame.scale._gameSize.height},this.isKeyPressed=function(e){return x.keys[e].isDown},this.isMouseDown=function(){return x._phaserGame.input.activePointer.isDown},this.getMouseX=function(){return x._phaserGame.input.worldX},this.getMouseY=function(){return x._phaserGame.input.worldY},this.isMouseLeftOfActor=function(e){return this.getMouseX()<e.sprite.body.x},this.isMouseRightOfActor=function(e){return this.getMouseX()>e.sprite.body.x},this.isMouseAboveActor=function(e){return this.getMouseY()<e.sprite.body.y},this.isMouseBelowActor=function(e){return this.getMouseY()>e.sprite.body.y},this.playSound=function(e){x.sounds[e].play()},this.loopSound=function(e){x.sounds[e].loopFull()},this.stopSounds=function(){x._phaserGame.sound.stopAll()},this.isTouchAvailable=function(){return x._phaserGame.device.touch||x._simulateTouchOnly},this};